"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ai-insights/route";
exports.ids = ["app/api/ai-insights/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-insights%2Froute&page=%2Fapi%2Fai-insights%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-insights%2Froute.ts&appDir=%2Fhome%2Fhsghumman%2FDocuments%2FDirt%20Drop%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fhsghumman%2FDocuments%2FDirt%20Drop&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-insights%2Froute&page=%2Fapi%2Fai-insights%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-insights%2Froute.ts&appDir=%2Fhome%2Fhsghumman%2FDocuments%2FDirt%20Drop%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fhsghumman%2FDocuments%2FDirt%20Drop&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_hsghumman_Documents_Dirt_Drop_src_app_api_ai_insights_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/ai-insights/route.ts */ \"(rsc)/./src/app/api/ai-insights/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ai-insights/route\",\n        pathname: \"/api/ai-insights\",\n        filename: \"route\",\n        bundlePath: \"app/api/ai-insights/route\"\n    },\n    resolvedPagePath: \"/home/hsghumman/Documents/Dirt Drop/src/app/api/ai-insights/route.ts\",\n    nextConfigOutput,\n    userland: _home_hsghumman_Documents_Dirt_Drop_src_app_api_ai_insights_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/ai-insights/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhaS1pbnNpZ2h0cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWktaW5zaWdodHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhaS1pbnNpZ2h0cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGaHNnaHVtbWFuJTJGRG9jdW1lbnRzJTJGRGlydCUyMERyb3AlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmhvbWUlMkZoc2dodW1tYW4lMkZEb2N1bWVudHMlMkZEaXJ0JTIwRHJvcCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNvQjtBQUNqRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldGluZy1kYXNoYm9hcmQvPzgwMmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL2hvbWUvaHNnaHVtbWFuL0RvY3VtZW50cy9EaXJ0IERyb3Avc3JjL2FwcC9hcGkvYWktaW5zaWdodHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FpLWluc2lnaHRzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWktaW5zaWdodHNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FpLWluc2lnaHRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL2hvbWUvaHNnaHVtbWFuL0RvY3VtZW50cy9EaXJ0IERyb3Avc3JjL2FwcC9hcGkvYWktaW5zaWdodHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYWktaW5zaWdodHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-insights%2Froute&page=%2Fapi%2Fai-insights%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-insights%2Froute.ts&appDir=%2Fhome%2Fhsghumman%2FDocuments%2FDirt%20Drop%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fhsghumman%2FDocuments%2FDirt%20Drop&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/ai-insights/route.ts":
/*!******************************************!*\
  !*** ./src/app/api/ai-insights/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_integrations_openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/integrations/openai */ \"(rsc)/./src/lib/integrations/openai.ts\");\n/* harmony import */ var _lib_integrations_appsflyer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/integrations/appsflyer */ \"(rsc)/./src/lib/integrations/appsflyer.ts\");\n\n\n\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { appId, type = \"insights\" } = body;\n        // Get comprehensive app data\n        const appData = await _lib_integrations_appsflyer__WEBPACK_IMPORTED_MODULE_2__.AppsFlyerService.getInsightsData(appId);\n        let result;\n        switch(type){\n            case \"insights\":\n                result = await _lib_integrations_openai__WEBPACK_IMPORTED_MODULE_1__.AIInsightsService.generateComprehensiveInsights(appData);\n                break;\n            case \"content\":\n                result = await _lib_integrations_openai__WEBPACK_IMPORTED_MODULE_1__.AIInsightsService.generateContentSuggestions(appData);\n                break;\n            case \"strategy\":\n                result = await _lib_integrations_openai__WEBPACK_IMPORTED_MODULE_1__.AIInsightsService.generateMarketingStrategy(appData);\n                break;\n            default:\n                result = await _lib_integrations_openai__WEBPACK_IMPORTED_MODULE_1__.AIInsightsService.generateComprehensiveInsights(appData);\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: result,\n            appData\n        });\n    } catch (error) {\n        console.error(\"Error generating AI insights:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to generate AI insights\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET() {\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n        message: \"AI Insights API is running\",\n        status: \"healthy\",\n        endpoints: {\n            \"POST /api/ai-insights\": \"Generate comprehensive insights\",\n            \"POST /api/ai-insights (type: content)\": \"Generate content suggestions\",\n            \"POST /api/ai-insights (type: strategy)\": \"Generate marketing strategy\"\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9haS1pbnNpZ2h0cy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF1RDtBQUNNO0FBQ0U7QUFFeEQsZUFBZUcsS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTUQsUUFBUUUsSUFBSTtRQUMvQixNQUFNLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxVQUFVLEVBQUUsR0FBR0g7UUFFckMsNkJBQTZCO1FBQzdCLE1BQU1JLFVBQVUsTUFBTVAseUVBQWdCQSxDQUFDUSxlQUFlLENBQUNIO1FBRXZELElBQUlJO1FBQ0osT0FBUUg7WUFDTixLQUFLO2dCQUNIRyxTQUFTLE1BQU1WLHVFQUFpQkEsQ0FBQ1csNkJBQTZCLENBQUNIO2dCQUMvRDtZQUNGLEtBQUs7Z0JBQ0hFLFNBQVMsTUFBTVYsdUVBQWlCQSxDQUFDWSwwQkFBMEIsQ0FBQ0o7Z0JBQzVEO1lBQ0YsS0FBSztnQkFDSEUsU0FBUyxNQUFNVix1RUFBaUJBLENBQUNhLHlCQUF5QixDQUFDTDtnQkFDM0Q7WUFDRjtnQkFDRUUsU0FBUyxNQUFNVix1RUFBaUJBLENBQUNXLDZCQUE2QixDQUFDSDtRQUNuRTtRQUVBLE9BQU9ULGtGQUFZQSxDQUFDTSxJQUFJLENBQUM7WUFDdkJTLFNBQVM7WUFDVEMsTUFBTUw7WUFDTkY7UUFDRjtJQUNGLEVBQUUsT0FBT1EsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsaUNBQWlDQTtRQUMvQyxPQUFPakIsa0ZBQVlBLENBQUNNLElBQUksQ0FDdEI7WUFDRVMsU0FBUztZQUNURSxPQUFPO1FBQ1QsR0FDQTtZQUFFRSxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVPLGVBQWVDO0lBQ3BCLE9BQU9wQixrRkFBWUEsQ0FBQ00sSUFBSSxDQUFDO1FBQ3ZCZSxTQUFTO1FBQ1RGLFFBQVE7UUFDUkcsV0FBVztZQUNULHlCQUF5QjtZQUN6Qix5Q0FBeUM7WUFDekMsMENBQTBDO1FBQzVDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldGluZy1kYXNoYm9hcmQvLi9zcmMvYXBwL2FwaS9haS1pbnNpZ2h0cy9yb3V0ZS50cz9iOGY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IEFJSW5zaWdodHNTZXJ2aWNlIH0gZnJvbSAnQC9saWIvaW50ZWdyYXRpb25zL29wZW5haSdcbmltcG9ydCB7IEFwcHNGbHllclNlcnZpY2UgfSBmcm9tICdAL2xpYi9pbnRlZ3JhdGlvbnMvYXBwc2ZseWVyJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGNvbnN0IHsgYXBwSWQsIHR5cGUgPSAnaW5zaWdodHMnIH0gPSBib2R5XG5cbiAgICAvLyBHZXQgY29tcHJlaGVuc2l2ZSBhcHAgZGF0YVxuICAgIGNvbnN0IGFwcERhdGEgPSBhd2FpdCBBcHBzRmx5ZXJTZXJ2aWNlLmdldEluc2lnaHRzRGF0YShhcHBJZClcblxuICAgIGxldCByZXN1bHRcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ2luc2lnaHRzJzpcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgQUlJbnNpZ2h0c1NlcnZpY2UuZ2VuZXJhdGVDb21wcmVoZW5zaXZlSW5zaWdodHMoYXBwRGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NvbnRlbnQnOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBBSUluc2lnaHRzU2VydmljZS5nZW5lcmF0ZUNvbnRlbnRTdWdnZXN0aW9ucyhhcHBEYXRhKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3RyYXRlZ3knOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBBSUluc2lnaHRzU2VydmljZS5nZW5lcmF0ZU1hcmtldGluZ1N0cmF0ZWd5KGFwcERhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBBSUluc2lnaHRzU2VydmljZS5nZW5lcmF0ZUNvbXByZWhlbnNpdmVJbnNpZ2h0cyhhcHBEYXRhKVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgIGFwcERhdGEgLy8gSW5jbHVkZSBhcHAgZGF0YSBmb3IgY29udGV4dFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBBSSBpbnNpZ2h0czonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgQUkgaW5zaWdodHMnIFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICBtZXNzYWdlOiAnQUkgSW5zaWdodHMgQVBJIGlzIHJ1bm5pbmcnLFxuICAgIHN0YXR1czogJ2hlYWx0aHknLFxuICAgIGVuZHBvaW50czoge1xuICAgICAgJ1BPU1QgL2FwaS9haS1pbnNpZ2h0cyc6ICdHZW5lcmF0ZSBjb21wcmVoZW5zaXZlIGluc2lnaHRzJyxcbiAgICAgICdQT1NUIC9hcGkvYWktaW5zaWdodHMgKHR5cGU6IGNvbnRlbnQpJzogJ0dlbmVyYXRlIGNvbnRlbnQgc3VnZ2VzdGlvbnMnLFxuICAgICAgJ1BPU1QgL2FwaS9haS1pbnNpZ2h0cyAodHlwZTogc3RyYXRlZ3kpJzogJ0dlbmVyYXRlIG1hcmtldGluZyBzdHJhdGVneSdcbiAgICB9XG4gIH0pXG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIkFJSW5zaWdodHNTZXJ2aWNlIiwiQXBwc0ZseWVyU2VydmljZSIsIlBPU1QiLCJyZXF1ZXN0IiwiYm9keSIsImpzb24iLCJhcHBJZCIsInR5cGUiLCJhcHBEYXRhIiwiZ2V0SW5zaWdodHNEYXRhIiwicmVzdWx0IiwiZ2VuZXJhdGVDb21wcmVoZW5zaXZlSW5zaWdodHMiLCJnZW5lcmF0ZUNvbnRlbnRTdWdnZXN0aW9ucyIsImdlbmVyYXRlTWFya2V0aW5nU3RyYXRlZ3kiLCJzdWNjZXNzIiwiZGF0YSIsImVycm9yIiwiY29uc29sZSIsInN0YXR1cyIsIkdFVCIsIm1lc3NhZ2UiLCJlbmRwb2ludHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/ai-insights/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrations/appsflyer.ts":
/*!*******************************************!*\
  !*** ./src/lib/integrations/appsflyer.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppsFlyerService: () => (/* binding */ AppsFlyerService)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n\nclass AppsFlyerService {\n    static{\n        this.BASE_URL = \"https://hq1.appsflyer.com/api/agg-data/export\";\n    }\n    static{\n        this.API_TOKEN = process.env.APPSFLYER_API_TOKEN;\n    }\n    static async getComprehensiveMetrics(appId) {\n        try {\n            if (!this.API_TOKEN) {\n                return this.getEnhancedMockData();\n            }\n            // Get installs data\n            const installsData = await this.fetchInstallsData(appId);\n            // Get revenue data  \n            const revenueData = await this.fetchRevenueData(appId);\n            // Get retention data\n            const retentionData = await this.fetchRetentionData(appId);\n            // Get cohort data\n            const cohortData = await this.fetchCohortData(appId);\n            return this.processComprehensiveData(installsData, revenueData, retentionData, cohortData);\n        } catch (error) {\n            console.error(\"Error fetching AppsFlyer data:\", error);\n            return this.getEnhancedMockData();\n        }\n    }\n    static async fetchInstallsData(appId) {\n        const params = {\n            from: this.getDateDaysAgo(30),\n            to: this.getCurrentDate(),\n            app_id: appId || \"your-app-id\",\n            grouping: \"date,geo,media_source,campaign\"\n        };\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.BASE_URL}/installs_report/v5`, {\n            params,\n            headers: {\n                \"Authorization\": `Bearer ${this.API_TOKEN}`,\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        return response.data;\n    }\n    static async fetchRevenueData(appId) {\n        const params = {\n            from: this.getDateDaysAgo(30),\n            to: this.getCurrentDate(),\n            app_id: appId || \"your-app-id\",\n            grouping: \"date,geo,media_source\"\n        };\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.BASE_URL}/revenue_report/v5`, {\n            params,\n            headers: {\n                \"Authorization\": `Bearer ${this.API_TOKEN}`,\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        return response.data;\n    }\n    static async fetchRetentionData(appId) {\n        const params = {\n            from: this.getDateDaysAgo(30),\n            to: this.getCurrentDate(),\n            app_id: appId || \"your-app-id\",\n            grouping: \"date,geo,media_source\"\n        };\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.BASE_URL}/retention_report/v5`, {\n            params,\n            headers: {\n                \"Authorization\": `Bearer ${this.API_TOKEN}`,\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        return response.data;\n    }\n    static async fetchCohortData(appId) {\n        const params = {\n            from: this.getDateDaysAgo(30),\n            to: this.getCurrentDate(),\n            app_id: appId || \"your-app-id\",\n            grouping: \"cohort_day,media_source\"\n        };\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.BASE_URL}/cohort_report/v5`, {\n            params,\n            headers: {\n                \"Authorization\": `Bearer ${this.API_TOKEN}`,\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        return response.data;\n    }\n    static processComprehensiveData(installs, revenue, retention, cohort) {\n        // Process real AppsFlyer data\n        const totalInstalls = Array.isArray(installs) ? installs.reduce((sum, item)=>sum + (parseInt(item.installs) || 0), 0) : 34;\n        const organicInstalls = Array.isArray(installs) ? installs.filter((item)=>item.media_source === \"organic\").reduce((sum, item)=>sum + (parseInt(item.installs) || 0), 0) : 12;\n        const totalRevenue = Array.isArray(revenue) ? revenue.reduce((sum, item)=>sum + (parseFloat(item.revenue) || 0), 0) : 850;\n        // Process country data\n        const countryData = Array.isArray(installs) ? installs.reduce((acc, item)=>{\n            const country = item.geo || item.country || \"Unknown\";\n            if (!acc[country]) acc[country] = 0;\n            acc[country] += parseInt(item.installs) || 0;\n            return acc;\n        }, {}) : {\n            \"Australia\": 20,\n            \"United States\": 8,\n            \"United Kingdom\": 4,\n            \"Canada\": 2\n        };\n        const topCountries = Object.entries(countryData).map(([country, installs])=>({\n                country,\n                installs: parseInt(installs),\n                percentage: parseInt(installs) / totalInstalls * 100\n            })).sort((a, b)=>b.installs - a.installs).slice(0, 5);\n        // Process campaign data\n        const campaignData = Array.isArray(installs) ? installs.reduce((acc, item)=>{\n            const campaign = item.campaign || item.media_source || \"Organic\";\n            if (!acc[campaign]) {\n                acc[campaign] = {\n                    installs: 0,\n                    cost: 0\n                };\n            }\n            acc[campaign].installs += parseInt(item.installs) || 0;\n            acc[campaign].cost += parseFloat(item.cost) || 0;\n            return acc;\n        }, {}) : {\n            \"Facebook Ads\": {\n                installs: 15,\n                cost: 375\n            },\n            \"Google UAC\": {\n                installs: 7,\n                cost: 175\n            },\n            \"Organic\": {\n                installs: 12,\n                cost: 0\n            }\n        };\n        const topCampaigns = Object.entries(campaignData).map(([campaign, data])=>({\n                campaign,\n                installs: data.installs,\n                cost: data.cost,\n                cpi: data.installs > 0 ? data.cost / data.installs : 0,\n                roas: data.cost > 0 ? data.installs * 25 / data.cost : 0 // Estimated ROAS\n            })).sort((a, b)=>b.installs - a.installs).slice(0, 5);\n        // Process daily data\n        const dailyData = this.processDailyData(installs, revenue);\n        // Process cohort data\n        const cohortProcessed = this.processCohortData(cohort);\n        // Process media source data\n        const mediaSourceData = this.processMediaSourceData(installs);\n        return {\n            totalInstalls,\n            organicInstalls,\n            nonOrganicInstalls: totalInstalls - organicInstalls,\n            totalRevenue,\n            averageCPI: totalInstalls > 0 ? totalRevenue * 0.3 / totalInstalls : 25.0,\n            retentionDay1: this.extractRetention(retention, 1) || 75.0,\n            retentionDay7: this.extractRetention(retention, 7) || 45.0,\n            retentionDay30: this.extractRetention(retention, 30) || 23.8,\n            topCountries,\n            topCampaigns,\n            dailyData,\n            cohortData: cohortProcessed,\n            mediaSourceData\n        };\n    }\n    static processDailyData(installs, revenue) {\n        const dailyMap = new Map();\n        // Process installs by date\n        if (Array.isArray(installs)) {\n            installs.forEach((item)=>{\n                const date = item.date || item.install_date;\n                if (!dailyMap.has(date)) {\n                    dailyMap.set(date, {\n                        installs: 0,\n                        revenue: 0,\n                        organicInstalls: 0,\n                        nonOrganicInstalls: 0\n                    });\n                }\n                const data = dailyMap.get(date);\n                data.installs += parseInt(item.installs) || 0;\n                if (item.media_source === \"organic\") {\n                    data.organicInstalls += parseInt(item.installs) || 0;\n                } else {\n                    data.nonOrganicInstalls += parseInt(item.installs) || 0;\n                }\n            });\n        }\n        // Add revenue data\n        if (Array.isArray(revenue)) {\n            revenue.forEach((item)=>{\n                const date = item.date || item.event_date;\n                if (dailyMap.has(date)) {\n                    dailyMap.get(date).revenue += parseFloat(item.revenue) || 0;\n                }\n            });\n        }\n        // Convert to array and fill missing dates\n        const result = [];\n        for(let i = 29; i >= 0; i--){\n            const date = new Date();\n            date.setDate(date.getDate() - i);\n            const dateStr = date.toISOString().split(\"T\")[0];\n            const data = dailyMap.get(dateStr) || {\n                installs: 0,\n                revenue: 0,\n                organicInstalls: 0,\n                nonOrganicInstalls: 0\n            };\n            result.push({\n                date: dateStr,\n                ...data\n            });\n        }\n        return result;\n    }\n    static processCohortData(cohort) {\n        if (!Array.isArray(cohort)) {\n            return [\n                {\n                    cohort: \"Week 1\",\n                    day1: 75,\n                    day7: 45,\n                    day30: 24\n                },\n                {\n                    cohort: \"Week 2\",\n                    day1: 72,\n                    day7: 42,\n                    day30: 22\n                },\n                {\n                    cohort: \"Week 3\",\n                    day1: 78,\n                    day7: 48,\n                    day30: 26\n                },\n                {\n                    cohort: \"Week 4\",\n                    day1: 74,\n                    day7: 44,\n                    day30: 23\n                }\n            ];\n        }\n        // Process real cohort data\n        const cohortMap = new Map();\n        cohort.forEach((item)=>{\n            const cohortKey = item.cohort || item.install_date;\n            if (!cohortMap.has(cohortKey)) {\n                cohortMap.set(cohortKey, {\n                    day1: 0,\n                    day7: 0,\n                    day30: 0\n                });\n            }\n            const data = cohortMap.get(cohortKey);\n            if (item.cohort_day === \"1\") data.day1 = parseFloat(item.retention_rate) || 0;\n            if (item.cohort_day === \"7\") data.day7 = parseFloat(item.retention_rate) || 0;\n            if (item.cohort_day === \"30\") data.day30 = parseFloat(item.retention_rate) || 0;\n        });\n        return Array.from(cohortMap.entries()).map(([cohort, data])=>({\n                cohort,\n                ...data\n            })).slice(0, 4);\n    }\n    static processMediaSourceData(installs) {\n        if (!Array.isArray(installs)) {\n            return [\n                {\n                    mediaSource: \"Facebook Ads\",\n                    installs: 15,\n                    cost: 375,\n                    cpi: 25.0,\n                    roas: 2.3\n                },\n                {\n                    mediaSource: \"Google UAC\",\n                    installs: 7,\n                    cost: 175,\n                    cpi: 25.0,\n                    roas: 4.9\n                },\n                {\n                    mediaSource: \"Organic\",\n                    installs: 12,\n                    cost: 0,\n                    cpi: 0,\n                    roas: 0\n                }\n            ];\n        }\n        const mediaSourceMap = new Map();\n        installs.forEach((item)=>{\n            const source = item.media_source || \"Unknown\";\n            if (!mediaSourceMap.has(source)) {\n                mediaSourceMap.set(source, {\n                    installs: 0,\n                    cost: 0\n                });\n            }\n            const data = mediaSourceMap.get(source);\n            data.installs += parseInt(item.installs) || 0;\n            data.cost += parseFloat(item.cost) || 0;\n        });\n        return Array.from(mediaSourceMap.entries()).map(([mediaSource, data])=>({\n                mediaSource,\n                installs: data.installs,\n                cost: data.cost,\n                cpi: data.installs > 0 ? data.cost / data.installs : 0,\n                roas: data.cost > 0 ? data.installs * 25 / data.cost : 0\n            })).sort((a, b)=>b.installs - a.installs);\n    }\n    static extractRetention(retention, day) {\n        if (!Array.isArray(retention)) return null;\n        const retentionItem = retention.find((item)=>parseInt(item.cohort_day) === day || parseInt(item.day) === day);\n        return retentionItem ? parseFloat(retentionItem.retention_rate) : null;\n    }\n    static getEnhancedMockData() {\n        return {\n            totalInstalls: 34,\n            organicInstalls: 12,\n            nonOrganicInstalls: 22,\n            totalRevenue: 850,\n            averageCPI: 25.0,\n            retentionDay1: 75.0,\n            retentionDay7: 45.0,\n            retentionDay30: 23.8,\n            topCountries: [\n                {\n                    country: \"Australia\",\n                    installs: 20,\n                    percentage: 58.8\n                },\n                {\n                    country: \"United States\",\n                    installs: 8,\n                    percentage: 23.5\n                },\n                {\n                    country: \"United Kingdom\",\n                    installs: 4,\n                    percentage: 11.8\n                },\n                {\n                    country: \"Canada\",\n                    installs: 2,\n                    percentage: 5.9\n                }\n            ],\n            topCampaigns: [\n                {\n                    campaign: \"Facebook Ads\",\n                    installs: 15,\n                    cost: 375,\n                    cpi: 25.0,\n                    roas: 2.3\n                },\n                {\n                    campaign: \"Google UAC\",\n                    installs: 7,\n                    cost: 175,\n                    cpi: 25.0,\n                    roas: 4.9\n                },\n                {\n                    campaign: \"Organic\",\n                    installs: 12,\n                    cost: 0,\n                    cpi: 0,\n                    roas: 0\n                }\n            ],\n            dailyData: this.generateRealisticDailyData(),\n            cohortData: [\n                {\n                    cohort: \"Week 1\",\n                    day1: 75,\n                    day7: 45,\n                    day30: 24\n                },\n                {\n                    cohort: \"Week 2\",\n                    day1: 72,\n                    day7: 42,\n                    day30: 22\n                },\n                {\n                    cohort: \"Week 3\",\n                    day1: 78,\n                    day7: 48,\n                    day30: 26\n                },\n                {\n                    cohort: \"Week 4\",\n                    day1: 74,\n                    day7: 44,\n                    day30: 23\n                }\n            ],\n            mediaSourceData: [\n                {\n                    mediaSource: \"Facebook Ads\",\n                    installs: 15,\n                    cost: 375,\n                    cpi: 25.0,\n                    roas: 2.3\n                },\n                {\n                    mediaSource: \"Google UAC\",\n                    installs: 7,\n                    cost: 175,\n                    cpi: 25.0,\n                    roas: 4.9\n                },\n                {\n                    mediaSource: \"Organic\",\n                    installs: 12,\n                    cost: 0,\n                    cpi: 0,\n                    roas: 0\n                }\n            ]\n        };\n    }\n    static generateRealisticDailyData() {\n        const data = [];\n        let totalInstalls = 0;\n        for(let i = 29; i >= 0; i--){\n            const date = new Date();\n            date.setDate(date.getDate() - i);\n            // Generate realistic distribution - more installs in recent days\n            let installs = 0;\n            if (totalInstalls < 34) {\n                if (i < 10) installs = Math.floor(Math.random() * 3) + 1 // Recent days: 1-3 installs\n                ;\n                else if (i < 20) installs = Math.floor(Math.random() * 2) // Mid period: 0-1 installs\n                ;\n                else installs = Math.random() < 0.3 ? 1 : 0 // Early days: occasional install\n                ;\n                if (totalInstalls + installs > 34) {\n                    installs = 34 - totalInstalls;\n                }\n                totalInstalls += installs;\n            }\n            data.push({\n                date: date.toISOString().split(\"T\")[0],\n                installs,\n                revenue: installs * 25,\n                organicInstalls: Math.floor(installs * 0.35),\n                nonOrganicInstalls: Math.floor(installs * 0.65)\n            });\n        }\n        return data;\n    }\n    static getDateDaysAgo(days) {\n        const date = new Date();\n        date.setDate(date.getDate() - days);\n        return date.toISOString().split(\"T\")[0];\n    }\n    static getCurrentDate() {\n        return new Date().toISOString().split(\"T\")[0];\n    }\n    // Method to get comprehensive insights data for AI analysis\n    static async getInsightsData(appId) {\n        const metrics = await this.getComprehensiveMetrics(appId);\n        return {\n            totalInstalls: metrics.totalInstalls,\n            organicRate: metrics.organicInstalls / metrics.totalInstalls * 100,\n            averageCPI: metrics.averageCPI,\n            retentionDay1: metrics.retentionDay1,\n            retentionDay7: metrics.retentionDay7,\n            retentionDay30: metrics.retentionDay30,\n            topPerformingCampaign: metrics.topCampaigns[0]?.campaign || \"N/A\",\n            topCountry: metrics.topCountries[0]?.country || \"N/A\",\n            recentTrend: this.analyzeTrend(metrics.dailyData),\n            totalRevenue: metrics.totalRevenue,\n            roas: this.calculateOverallROAS(metrics.topCampaigns),\n            cohortPerformance: this.analyzeCohortPerformance(metrics.cohortData),\n            mediaSourcePerformance: this.analyzeMediaSourcePerformance(metrics.mediaSourceData)\n        };\n    }\n    static analyzeTrend(dailyData) {\n        if (dailyData.length < 7) return \"insufficient_data\";\n        const recent7Days = dailyData.slice(-7).reduce((sum, day)=>sum + day.installs, 0);\n        const previous7Days = dailyData.slice(-14, -7).reduce((sum, day)=>sum + day.installs, 0);\n        if (previous7Days === 0) return recent7Days > 0 ? \"growing\" : \"stagnant\";\n        const change = (recent7Days - previous7Days) / previous7Days * 100;\n        if (change > 20) return \"rapidly_growing\";\n        if (change > 10) return \"growing\";\n        if (change < -20) return \"rapidly_declining\";\n        if (change < -10) return \"declining\";\n        return \"stable\";\n    }\n    static calculateOverallROAS(campaigns) {\n        const totalCost = campaigns.reduce((sum, campaign)=>sum + campaign.cost, 0);\n        const totalRevenue = campaigns.reduce((sum, campaign)=>sum + campaign.installs * 25, 0) // $25 per install\n        ;\n        return totalCost > 0 ? totalRevenue / totalCost : 0;\n    }\n    static analyzeCohortPerformance(cohorts) {\n        if (cohorts.length === 0) return \"no_data\";\n        const avgDay30 = cohorts.reduce((sum, cohort)=>sum + cohort.day30, 0) / cohorts.length;\n        if (avgDay30 > 30) return \"excellent\";\n        if (avgDay30 > 20) return \"good\";\n        if (avgDay30 > 15) return \"average\";\n        return \"needs_improvement\";\n    }\n    static analyzeMediaSourcePerformance(mediaSources) {\n        const paidSources = mediaSources.filter((source)=>source.cost > 0);\n        if (paidSources.length === 0) return \"organic_only\";\n        const avgCPI = paidSources.reduce((sum, source)=>sum + source.cpi, 0) / paidSources.length;\n        const avgROAS = paidSources.reduce((sum, source)=>sum + source.roas, 0) / paidSources.length;\n        if (avgROAS > 3 && avgCPI < 30) return \"excellent\";\n        if (avgROAS > 2 && avgCPI < 40) return \"good\";\n        if (avgROAS > 1.5) return \"average\";\n        return \"needs_optimization\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxNQUFNTCxPQUFPK0QsS0FBSyxFQUFFLEtBQUtrQyxRQUFRTixNQUFNO1FBRXhGLElBQUlPLFdBQVcsSUFBSSxPQUFPO1FBQzFCLElBQUlBLFdBQVcsSUFBSSxPQUFPO1FBQzFCLElBQUlBLFdBQVcsSUFBSSxPQUFPO1FBQzFCLE9BQU87SUFDVDtJQUVBLE9BQWVSLDhCQUE4QlMsWUFBbUIsRUFBRTtRQUNoRSxNQUFNQyxjQUFjRCxhQUFhMUYsTUFBTSxDQUFDNkQsQ0FBQUEsU0FBVUEsT0FBTzFDLElBQUksR0FBRztRQUNoRSxJQUFJd0UsWUFBWVQsTUFBTSxLQUFLLEdBQUcsT0FBTztRQUVyQyxNQUFNVSxTQUFTRCxZQUFZaEcsTUFBTSxDQUFDLENBQUNDLEtBQUtpRSxTQUFXakUsTUFBTWlFLE9BQU94QyxHQUFHLEVBQUUsS0FBS3NFLFlBQVlULE1BQU07UUFDNUYsTUFBTVcsVUFBVUYsWUFBWWhHLE1BQU0sQ0FBQyxDQUFDQyxLQUFLaUUsU0FBV2pFLE1BQU1pRSxPQUFPdkMsSUFBSSxFQUFFLEtBQUtxRSxZQUFZVCxNQUFNO1FBRTlGLElBQUlXLFVBQVUsS0FBS0QsU0FBUyxJQUFJLE9BQU87UUFDdkMsSUFBSUMsVUFBVSxLQUFLRCxTQUFTLElBQUksT0FBTztRQUN2QyxJQUFJQyxVQUFVLEtBQUssT0FBTztRQUMxQixPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldGluZy1kYXNoYm9hcmQvLi9zcmMvbGliL2ludGVncmF0aW9ucy9hcHBzZmx5ZXIudHM/ZjhiNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnXG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwc0ZseWVyTWV0cmljcyB7XG4gIHRvdGFsSW5zdGFsbHM6IG51bWJlclxuICBvcmdhbmljSW5zdGFsbHM6IG51bWJlclxuICBub25PcmdhbmljSW5zdGFsbHM6IG51bWJlclxuICB0b3RhbFJldmVudWU6IG51bWJlclxuICBhdmVyYWdlQ1BJOiBudW1iZXJcbiAgcmV0ZW50aW9uRGF5MTogbnVtYmVyXG4gIHJldGVudGlvbkRheTc6IG51bWJlclxuICByZXRlbnRpb25EYXkzMDogbnVtYmVyXG4gIHRvcENvdW50cmllczogQXJyYXk8e1xuICAgIGNvdW50cnk6IHN0cmluZ1xuICAgIGluc3RhbGxzOiBudW1iZXJcbiAgICBwZXJjZW50YWdlOiBudW1iZXJcbiAgfT5cbiAgdG9wQ2FtcGFpZ25zOiBBcnJheTx7XG4gICAgY2FtcGFpZ246IHN0cmluZ1xuICAgIGluc3RhbGxzOiBudW1iZXJcbiAgICBjb3N0OiBudW1iZXJcbiAgICBjcGk6IG51bWJlclxuICAgIHJvYXM6IG51bWJlclxuICB9PlxuICBkYWlseURhdGE6IEFycmF5PHtcbiAgICBkYXRlOiBzdHJpbmdcbiAgICBpbnN0YWxsczogbnVtYmVyXG4gICAgcmV2ZW51ZTogbnVtYmVyXG4gICAgb3JnYW5pY0luc3RhbGxzOiBudW1iZXJcbiAgICBub25PcmdhbmljSW5zdGFsbHM6IG51bWJlclxuICB9PlxuICBjb2hvcnREYXRhOiBBcnJheTx7XG4gICAgY29ob3J0OiBzdHJpbmdcbiAgICBkYXkxOiBudW1iZXJcbiAgICBkYXk3OiBudW1iZXJcbiAgICBkYXkzMDogbnVtYmVyXG4gIH0+XG4gIG1lZGlhU291cmNlRGF0YTogQXJyYXk8e1xuICAgIG1lZGlhU291cmNlOiBzdHJpbmdcbiAgICBpbnN0YWxsczogbnVtYmVyXG4gICAgY29zdDogbnVtYmVyXG4gICAgY3BpOiBudW1iZXJcbiAgICByb2FzOiBudW1iZXJcbiAgfT5cbn1cblxuZXhwb3J0IGNsYXNzIEFwcHNGbHllclNlcnZpY2Uge1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBCQVNFX1VSTCA9ICdodHRwczovL2hxMS5hcHBzZmx5ZXIuY29tL2FwaS9hZ2ctZGF0YS9leHBvcnQnXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IEFQSV9UT0tFTiA9IHByb2Nlc3MuZW52LkFQUFNGTFlFUl9BUElfVE9LRU5cblxuICBzdGF0aWMgYXN5bmMgZ2V0Q29tcHJlaGVuc2l2ZU1ldHJpY3MoYXBwSWQ/OiBzdHJpbmcpOiBQcm9taXNlPEFwcHNGbHllck1ldHJpY3M+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF0aGlzLkFQSV9UT0tFTikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRFbmhhbmNlZE1vY2tEYXRhKClcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IGluc3RhbGxzIGRhdGFcbiAgICAgIGNvbnN0IGluc3RhbGxzRGF0YSA9IGF3YWl0IHRoaXMuZmV0Y2hJbnN0YWxsc0RhdGEoYXBwSWQpXG4gICAgICBcbiAgICAgIC8vIEdldCByZXZlbnVlIGRhdGEgIFxuICAgICAgY29uc3QgcmV2ZW51ZURhdGEgPSBhd2FpdCB0aGlzLmZldGNoUmV2ZW51ZURhdGEoYXBwSWQpXG4gICAgICBcbiAgICAgIC8vIEdldCByZXRlbnRpb24gZGF0YVxuICAgICAgY29uc3QgcmV0ZW50aW9uRGF0YSA9IGF3YWl0IHRoaXMuZmV0Y2hSZXRlbnRpb25EYXRhKGFwcElkKVxuICAgICAgXG4gICAgICAvLyBHZXQgY29ob3J0IGRhdGFcbiAgICAgIGNvbnN0IGNvaG9ydERhdGEgPSBhd2FpdCB0aGlzLmZldGNoQ29ob3J0RGF0YShhcHBJZClcblxuICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0NvbXByZWhlbnNpdmVEYXRhKGluc3RhbGxzRGF0YSwgcmV2ZW51ZURhdGEsIHJldGVudGlvbkRhdGEsIGNvaG9ydERhdGEpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIEFwcHNGbHllciBkYXRhOicsIGVycm9yKVxuICAgICAgcmV0dXJuIHRoaXMuZ2V0RW5oYW5jZWRNb2NrRGF0YSgpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgZmV0Y2hJbnN0YWxsc0RhdGEoYXBwSWQ/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICBmcm9tOiB0aGlzLmdldERhdGVEYXlzQWdvKDMwKSxcbiAgICAgIHRvOiB0aGlzLmdldEN1cnJlbnREYXRlKCksXG4gICAgICBhcHBfaWQ6IGFwcElkIHx8ICd5b3VyLWFwcC1pZCcsXG4gICAgICBncm91cGluZzogJ2RhdGUsZ2VvLG1lZGlhX3NvdXJjZSxjYW1wYWlnbidcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgJHt0aGlzLkJBU0VfVVJMfS9pbnN0YWxsc19yZXBvcnQvdjVgLCB7IFxuICAgICAgcGFyYW1zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLkFQSV9UT0tFTn1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YVxuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgZmV0Y2hSZXZlbnVlRGF0YShhcHBJZD86IHN0cmluZykge1xuICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgIGZyb206IHRoaXMuZ2V0RGF0ZURheXNBZ28oMzApLFxuICAgICAgdG86IHRoaXMuZ2V0Q3VycmVudERhdGUoKSxcbiAgICAgIGFwcF9pZDogYXBwSWQgfHwgJ3lvdXItYXBwLWlkJyxcbiAgICAgIGdyb3VwaW5nOiAnZGF0ZSxnZW8sbWVkaWFfc291cmNlJ1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGAke3RoaXMuQkFTRV9VUkx9L3JldmVudWVfcmVwb3J0L3Y1YCwgeyBcbiAgICAgIHBhcmFtcyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5BUElfVE9LRU59YCxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGFcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGZldGNoUmV0ZW50aW9uRGF0YShhcHBJZD86IHN0cmluZykge1xuICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgIGZyb206IHRoaXMuZ2V0RGF0ZURheXNBZ28oMzApLFxuICAgICAgdG86IHRoaXMuZ2V0Q3VycmVudERhdGUoKSxcbiAgICAgIGFwcF9pZDogYXBwSWQgfHwgJ3lvdXItYXBwLWlkJyxcbiAgICAgIGdyb3VwaW5nOiAnZGF0ZSxnZW8sbWVkaWFfc291cmNlJ1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGAke3RoaXMuQkFTRV9VUkx9L3JldGVudGlvbl9yZXBvcnQvdjVgLCB7IFxuICAgICAgcGFyYW1zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLkFQSV9UT0tFTn1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YVxuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgZmV0Y2hDb2hvcnREYXRhKGFwcElkPzogc3RyaW5nKSB7XG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgZnJvbTogdGhpcy5nZXREYXRlRGF5c0FnbygzMCksXG4gICAgICB0bzogdGhpcy5nZXRDdXJyZW50RGF0ZSgpLFxuICAgICAgYXBwX2lkOiBhcHBJZCB8fCAneW91ci1hcHAtaWQnLFxuICAgICAgZ3JvdXBpbmc6ICdjb2hvcnRfZGF5LG1lZGlhX3NvdXJjZSdcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgJHt0aGlzLkJBU0VfVVJMfS9jb2hvcnRfcmVwb3J0L3Y1YCwgeyBcbiAgICAgIHBhcmFtcyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5BUElfVE9LRU59YCxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGFcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIHByb2Nlc3NDb21wcmVoZW5zaXZlRGF0YShpbnN0YWxsczogYW55LCByZXZlbnVlOiBhbnksIHJldGVudGlvbjogYW55LCBjb2hvcnQ6IGFueSk6IEFwcHNGbHllck1ldHJpY3Mge1xuICAgIC8vIFByb2Nlc3MgcmVhbCBBcHBzRmx5ZXIgZGF0YVxuICAgIGNvbnN0IHRvdGFsSW5zdGFsbHMgPSBBcnJheS5pc0FycmF5KGluc3RhbGxzKSA/IFxuICAgICAgaW5zdGFsbHMucmVkdWNlKChzdW06IG51bWJlciwgaXRlbTogYW55KSA9PiBzdW0gKyAocGFyc2VJbnQoaXRlbS5pbnN0YWxscykgfHwgMCksIDApIDogMzRcblxuICAgIGNvbnN0IG9yZ2FuaWNJbnN0YWxscyA9IEFycmF5LmlzQXJyYXkoaW5zdGFsbHMpID8gXG4gICAgICBpbnN0YWxscy5maWx0ZXIoKGl0ZW06IGFueSkgPT4gaXRlbS5tZWRpYV9zb3VyY2UgPT09ICdvcmdhbmljJylcbiAgICAgICAgLnJlZHVjZSgoc3VtOiBudW1iZXIsIGl0ZW06IGFueSkgPT4gc3VtICsgKHBhcnNlSW50KGl0ZW0uaW5zdGFsbHMpIHx8IDApLCAwKSA6IDEyXG5cbiAgICBjb25zdCB0b3RhbFJldmVudWUgPSBBcnJheS5pc0FycmF5KHJldmVudWUpID8gXG4gICAgICByZXZlbnVlLnJlZHVjZSgoc3VtOiBudW1iZXIsIGl0ZW06IGFueSkgPT4gc3VtICsgKHBhcnNlRmxvYXQoaXRlbS5yZXZlbnVlKSB8fCAwKSwgMCkgOiA4NTBcblxuICAgIC8vIFByb2Nlc3MgY291bnRyeSBkYXRhXG4gICAgY29uc3QgY291bnRyeURhdGEgPSBBcnJheS5pc0FycmF5KGluc3RhbGxzKSA/IFxuICAgICAgaW5zdGFsbHMucmVkdWNlKChhY2M6IGFueSwgaXRlbTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGNvdW50cnkgPSBpdGVtLmdlbyB8fCBpdGVtLmNvdW50cnkgfHwgJ1Vua25vd24nXG4gICAgICAgIGlmICghYWNjW2NvdW50cnldKSBhY2NbY291bnRyeV0gPSAwXG4gICAgICAgIGFjY1tjb3VudHJ5XSArPSBwYXJzZUludChpdGVtLmluc3RhbGxzKSB8fCAwXG4gICAgICAgIHJldHVybiBhY2NcbiAgICAgIH0sIHt9KSA6IHsgJ0F1c3RyYWxpYSc6IDIwLCAnVW5pdGVkIFN0YXRlcyc6IDgsICdVbml0ZWQgS2luZ2RvbSc6IDQsICdDYW5hZGEnOiAyIH1cblxuICAgIGNvbnN0IHRvcENvdW50cmllcyA9IE9iamVjdC5lbnRyaWVzKGNvdW50cnlEYXRhKVxuICAgICAgLm1hcCgoW2NvdW50cnksIGluc3RhbGxzXTogW3N0cmluZywgYW55XSkgPT4gKHtcbiAgICAgICAgY291bnRyeSxcbiAgICAgICAgaW5zdGFsbHM6IHBhcnNlSW50KGluc3RhbGxzKSxcbiAgICAgICAgcGVyY2VudGFnZTogKHBhcnNlSW50KGluc3RhbGxzKSAvIHRvdGFsSW5zdGFsbHMpICogMTAwXG4gICAgICB9KSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmluc3RhbGxzIC0gYS5pbnN0YWxscylcbiAgICAgIC5zbGljZSgwLCA1KVxuXG4gICAgLy8gUHJvY2VzcyBjYW1wYWlnbiBkYXRhXG4gICAgY29uc3QgY2FtcGFpZ25EYXRhID0gQXJyYXkuaXNBcnJheShpbnN0YWxscykgPyBcbiAgICAgIGluc3RhbGxzLnJlZHVjZSgoYWNjOiBhbnksIGl0ZW06IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBjYW1wYWlnbiA9IGl0ZW0uY2FtcGFpZ24gfHwgaXRlbS5tZWRpYV9zb3VyY2UgfHwgJ09yZ2FuaWMnXG4gICAgICAgIGlmICghYWNjW2NhbXBhaWduXSkge1xuICAgICAgICAgIGFjY1tjYW1wYWlnbl0gPSB7IGluc3RhbGxzOiAwLCBjb3N0OiAwIH1cbiAgICAgICAgfVxuICAgICAgICBhY2NbY2FtcGFpZ25dLmluc3RhbGxzICs9IHBhcnNlSW50KGl0ZW0uaW5zdGFsbHMpIHx8IDBcbiAgICAgICAgYWNjW2NhbXBhaWduXS5jb3N0ICs9IHBhcnNlRmxvYXQoaXRlbS5jb3N0KSB8fCAwXG4gICAgICAgIHJldHVybiBhY2NcbiAgICAgIH0sIHt9KSA6IHtcbiAgICAgICAgJ0ZhY2Vib29rIEFkcyc6IHsgaW5zdGFsbHM6IDE1LCBjb3N0OiAzNzUgfSxcbiAgICAgICAgJ0dvb2dsZSBVQUMnOiB7IGluc3RhbGxzOiA3LCBjb3N0OiAxNzUgfSxcbiAgICAgICAgJ09yZ2FuaWMnOiB7IGluc3RhbGxzOiAxMiwgY29zdDogMCB9XG4gICAgICB9XG5cbiAgICBjb25zdCB0b3BDYW1wYWlnbnMgPSBPYmplY3QuZW50cmllcyhjYW1wYWlnbkRhdGEpXG4gICAgICAubWFwKChbY2FtcGFpZ24sIGRhdGFdOiBbc3RyaW5nLCBhbnldKSA9PiAoe1xuICAgICAgICBjYW1wYWlnbixcbiAgICAgICAgaW5zdGFsbHM6IGRhdGEuaW5zdGFsbHMsXG4gICAgICAgIGNvc3Q6IGRhdGEuY29zdCxcbiAgICAgICAgY3BpOiBkYXRhLmluc3RhbGxzID4gMCA/IGRhdGEuY29zdCAvIGRhdGEuaW5zdGFsbHMgOiAwLFxuICAgICAgICByb2FzOiBkYXRhLmNvc3QgPiAwID8gKGRhdGEuaW5zdGFsbHMgKiAyNSkgLyBkYXRhLmNvc3QgOiAwIC8vIEVzdGltYXRlZCBST0FTXG4gICAgICB9KSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmluc3RhbGxzIC0gYS5pbnN0YWxscylcbiAgICAgIC5zbGljZSgwLCA1KVxuXG4gICAgLy8gUHJvY2VzcyBkYWlseSBkYXRhXG4gICAgY29uc3QgZGFpbHlEYXRhID0gdGhpcy5wcm9jZXNzRGFpbHlEYXRhKGluc3RhbGxzLCByZXZlbnVlKVxuXG4gICAgLy8gUHJvY2VzcyBjb2hvcnQgZGF0YVxuICAgIGNvbnN0IGNvaG9ydFByb2Nlc3NlZCA9IHRoaXMucHJvY2Vzc0NvaG9ydERhdGEoY29ob3J0KVxuXG4gICAgLy8gUHJvY2VzcyBtZWRpYSBzb3VyY2UgZGF0YVxuICAgIGNvbnN0IG1lZGlhU291cmNlRGF0YSA9IHRoaXMucHJvY2Vzc01lZGlhU291cmNlRGF0YShpbnN0YWxscylcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbEluc3RhbGxzLFxuICAgICAgb3JnYW5pY0luc3RhbGxzLFxuICAgICAgbm9uT3JnYW5pY0luc3RhbGxzOiB0b3RhbEluc3RhbGxzIC0gb3JnYW5pY0luc3RhbGxzLFxuICAgICAgdG90YWxSZXZlbnVlLFxuICAgICAgYXZlcmFnZUNQSTogdG90YWxJbnN0YWxscyA+IDAgPyAodG90YWxSZXZlbnVlICogMC4zKSAvIHRvdGFsSW5zdGFsbHMgOiAyNS4wLFxuICAgICAgcmV0ZW50aW9uRGF5MTogdGhpcy5leHRyYWN0UmV0ZW50aW9uKHJldGVudGlvbiwgMSkgfHwgNzUuMCxcbiAgICAgIHJldGVudGlvbkRheTc6IHRoaXMuZXh0cmFjdFJldGVudGlvbihyZXRlbnRpb24sIDcpIHx8IDQ1LjAsXG4gICAgICByZXRlbnRpb25EYXkzMDogdGhpcy5leHRyYWN0UmV0ZW50aW9uKHJldGVudGlvbiwgMzApIHx8IDIzLjgsXG4gICAgICB0b3BDb3VudHJpZXMsXG4gICAgICB0b3BDYW1wYWlnbnMsXG4gICAgICBkYWlseURhdGEsXG4gICAgICBjb2hvcnREYXRhOiBjb2hvcnRQcm9jZXNzZWQsXG4gICAgICBtZWRpYVNvdXJjZURhdGFcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBwcm9jZXNzRGFpbHlEYXRhKGluc3RhbGxzOiBhbnksIHJldmVudWU6IGFueSkge1xuICAgIGNvbnN0IGRhaWx5TWFwID0gbmV3IE1hcCgpXG4gICAgXG4gICAgLy8gUHJvY2VzcyBpbnN0YWxscyBieSBkYXRlXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaW5zdGFsbHMpKSB7XG4gICAgICBpbnN0YWxscy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IGl0ZW0uZGF0ZSB8fCBpdGVtLmluc3RhbGxfZGF0ZVxuICAgICAgICBpZiAoIWRhaWx5TWFwLmhhcyhkYXRlKSkge1xuICAgICAgICAgIGRhaWx5TWFwLnNldChkYXRlLCB7IGluc3RhbGxzOiAwLCByZXZlbnVlOiAwLCBvcmdhbmljSW5zdGFsbHM6IDAsIG5vbk9yZ2FuaWNJbnN0YWxsczogMCB9KVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBkYWlseU1hcC5nZXQoZGF0ZSlcbiAgICAgICAgZGF0YS5pbnN0YWxscyArPSBwYXJzZUludChpdGVtLmluc3RhbGxzKSB8fCAwXG4gICAgICAgIGlmIChpdGVtLm1lZGlhX3NvdXJjZSA9PT0gJ29yZ2FuaWMnKSB7XG4gICAgICAgICAgZGF0YS5vcmdhbmljSW5zdGFsbHMgKz0gcGFyc2VJbnQoaXRlbS5pbnN0YWxscykgfHwgMFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEubm9uT3JnYW5pY0luc3RhbGxzICs9IHBhcnNlSW50KGl0ZW0uaW5zdGFsbHMpIHx8IDBcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBBZGQgcmV2ZW51ZSBkYXRhXG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmV2ZW51ZSkpIHtcbiAgICAgIHJldmVudWUuZm9yRWFjaCgoaXRlbTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBpdGVtLmRhdGUgfHwgaXRlbS5ldmVudF9kYXRlXG4gICAgICAgIGlmIChkYWlseU1hcC5oYXMoZGF0ZSkpIHtcbiAgICAgICAgICBkYWlseU1hcC5nZXQoZGF0ZSkucmV2ZW51ZSArPSBwYXJzZUZsb2F0KGl0ZW0ucmV2ZW51ZSkgfHwgMFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIENvbnZlcnQgdG8gYXJyYXkgYW5kIGZpbGwgbWlzc2luZyBkYXRlc1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdXG4gICAgZm9yIChsZXQgaSA9IDI5OyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKClcbiAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGkpXG4gICAgICBjb25zdCBkYXRlU3RyID0gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cbiAgICAgIFxuICAgICAgY29uc3QgZGF0YSA9IGRhaWx5TWFwLmdldChkYXRlU3RyKSB8fCB7IGluc3RhbGxzOiAwLCByZXZlbnVlOiAwLCBvcmdhbmljSW5zdGFsbHM6IDAsIG5vbk9yZ2FuaWNJbnN0YWxsczogMCB9XG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIGRhdGU6IGRhdGVTdHIsXG4gICAgICAgIC4uLmRhdGFcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcHJvY2Vzc0NvaG9ydERhdGEoY29ob3J0OiBhbnkpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29ob3J0KSkge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgeyBjb2hvcnQ6ICdXZWVrIDEnLCBkYXkxOiA3NSwgZGF5NzogNDUsIGRheTMwOiAyNCB9LFxuICAgICAgICB7IGNvaG9ydDogJ1dlZWsgMicsIGRheTE6IDcyLCBkYXk3OiA0MiwgZGF5MzA6IDIyIH0sXG4gICAgICAgIHsgY29ob3J0OiAnV2VlayAzJywgZGF5MTogNzgsIGRheTc6IDQ4LCBkYXkzMDogMjYgfSxcbiAgICAgICAgeyBjb2hvcnQ6ICdXZWVrIDQnLCBkYXkxOiA3NCwgZGF5NzogNDQsIGRheTMwOiAyMyB9XG4gICAgICBdXG4gICAgfVxuXG4gICAgLy8gUHJvY2VzcyByZWFsIGNvaG9ydCBkYXRhXG4gICAgY29uc3QgY29ob3J0TWFwID0gbmV3IE1hcCgpXG4gICAgY29ob3J0LmZvckVhY2goKGl0ZW06IGFueSkgPT4ge1xuICAgICAgY29uc3QgY29ob3J0S2V5ID0gaXRlbS5jb2hvcnQgfHwgaXRlbS5pbnN0YWxsX2RhdGVcbiAgICAgIGlmICghY29ob3J0TWFwLmhhcyhjb2hvcnRLZXkpKSB7XG4gICAgICAgIGNvaG9ydE1hcC5zZXQoY29ob3J0S2V5LCB7IGRheTE6IDAsIGRheTc6IDAsIGRheTMwOiAwIH0pXG4gICAgICB9XG4gICAgICBjb25zdCBkYXRhID0gY29ob3J0TWFwLmdldChjb2hvcnRLZXkpXG4gICAgICBpZiAoaXRlbS5jb2hvcnRfZGF5ID09PSAnMScpIGRhdGEuZGF5MSA9IHBhcnNlRmxvYXQoaXRlbS5yZXRlbnRpb25fcmF0ZSkgfHwgMFxuICAgICAgaWYgKGl0ZW0uY29ob3J0X2RheSA9PT0gJzcnKSBkYXRhLmRheTcgPSBwYXJzZUZsb2F0KGl0ZW0ucmV0ZW50aW9uX3JhdGUpIHx8IDBcbiAgICAgIGlmIChpdGVtLmNvaG9ydF9kYXkgPT09ICczMCcpIGRhdGEuZGF5MzAgPSBwYXJzZUZsb2F0KGl0ZW0ucmV0ZW50aW9uX3JhdGUpIHx8IDBcbiAgICB9KVxuXG4gICAgcmV0dXJuIEFycmF5LmZyb20oY29ob3J0TWFwLmVudHJpZXMoKSkubWFwKChbY29ob3J0LCBkYXRhXSkgPT4gKHtcbiAgICAgIGNvaG9ydCxcbiAgICAgIC4uLmRhdGFcbiAgICB9KSkuc2xpY2UoMCwgNClcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIHByb2Nlc3NNZWRpYVNvdXJjZURhdGEoaW5zdGFsbHM6IGFueSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShpbnN0YWxscykpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHsgbWVkaWFTb3VyY2U6ICdGYWNlYm9vayBBZHMnLCBpbnN0YWxsczogMTUsIGNvc3Q6IDM3NSwgY3BpOiAyNS4wLCByb2FzOiAyLjMgfSxcbiAgICAgICAgeyBtZWRpYVNvdXJjZTogJ0dvb2dsZSBVQUMnLCBpbnN0YWxsczogNywgY29zdDogMTc1LCBjcGk6IDI1LjAsIHJvYXM6IDQuOSB9LFxuICAgICAgICB7IG1lZGlhU291cmNlOiAnT3JnYW5pYycsIGluc3RhbGxzOiAxMiwgY29zdDogMCwgY3BpOiAwLCByb2FzOiAwIH1cbiAgICAgIF1cbiAgICB9XG5cbiAgICBjb25zdCBtZWRpYVNvdXJjZU1hcCA9IG5ldyBNYXAoKVxuICAgIGluc3RhbGxzLmZvckVhY2goKGl0ZW06IGFueSkgPT4ge1xuICAgICAgY29uc3Qgc291cmNlID0gaXRlbS5tZWRpYV9zb3VyY2UgfHwgJ1Vua25vd24nXG4gICAgICBpZiAoIW1lZGlhU291cmNlTWFwLmhhcyhzb3VyY2UpKSB7XG4gICAgICAgIG1lZGlhU291cmNlTWFwLnNldChzb3VyY2UsIHsgaW5zdGFsbHM6IDAsIGNvc3Q6IDAgfSlcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRhdGEgPSBtZWRpYVNvdXJjZU1hcC5nZXQoc291cmNlKVxuICAgICAgZGF0YS5pbnN0YWxscyArPSBwYXJzZUludChpdGVtLmluc3RhbGxzKSB8fCAwXG4gICAgICBkYXRhLmNvc3QgKz0gcGFyc2VGbG9hdChpdGVtLmNvc3QpIHx8IDBcbiAgICB9KVxuXG4gICAgcmV0dXJuIEFycmF5LmZyb20obWVkaWFTb3VyY2VNYXAuZW50cmllcygpKS5tYXAoKFttZWRpYVNvdXJjZSwgZGF0YV06IFtzdHJpbmcsIGFueV0pID0+ICh7XG4gICAgICBtZWRpYVNvdXJjZSxcbiAgICAgIGluc3RhbGxzOiBkYXRhLmluc3RhbGxzLFxuICAgICAgY29zdDogZGF0YS5jb3N0LFxuICAgICAgY3BpOiBkYXRhLmluc3RhbGxzID4gMCA/IGRhdGEuY29zdCAvIGRhdGEuaW5zdGFsbHMgOiAwLFxuICAgICAgcm9hczogZGF0YS5jb3N0ID4gMCA/IChkYXRhLmluc3RhbGxzICogMjUpIC8gZGF0YS5jb3N0IDogMFxuICAgIH0pKS5zb3J0KChhLCBiKSA9PiBiLmluc3RhbGxzIC0gYS5pbnN0YWxscylcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGV4dHJhY3RSZXRlbnRpb24ocmV0ZW50aW9uOiBhbnksIGRheTogbnVtYmVyKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHJldGVudGlvbikpIHJldHVybiBudWxsXG4gICAgXG4gICAgY29uc3QgcmV0ZW50aW9uSXRlbSA9IHJldGVudGlvbi5maW5kKChpdGVtOiBhbnkpID0+IFxuICAgICAgcGFyc2VJbnQoaXRlbS5jb2hvcnRfZGF5KSA9PT0gZGF5IHx8IHBhcnNlSW50KGl0ZW0uZGF5KSA9PT0gZGF5XG4gICAgKVxuICAgIFxuICAgIHJldHVybiByZXRlbnRpb25JdGVtID8gcGFyc2VGbG9hdChyZXRlbnRpb25JdGVtLnJldGVudGlvbl9yYXRlKSA6IG51bGxcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGdldEVuaGFuY2VkTW9ja0RhdGEoKTogQXBwc0ZseWVyTWV0cmljcyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsSW5zdGFsbHM6IDM0LFxuICAgICAgb3JnYW5pY0luc3RhbGxzOiAxMixcbiAgICAgIG5vbk9yZ2FuaWNJbnN0YWxsczogMjIsXG4gICAgICB0b3RhbFJldmVudWU6IDg1MCxcbiAgICAgIGF2ZXJhZ2VDUEk6IDI1LjAsXG4gICAgICByZXRlbnRpb25EYXkxOiA3NS4wLFxuICAgICAgcmV0ZW50aW9uRGF5NzogNDUuMCxcbiAgICAgIHJldGVudGlvbkRheTMwOiAyMy44LFxuICAgICAgdG9wQ291bnRyaWVzOiBbXG4gICAgICAgIHsgY291bnRyeTogJ0F1c3RyYWxpYScsIGluc3RhbGxzOiAyMCwgcGVyY2VudGFnZTogNTguOCB9LFxuICAgICAgICB7IGNvdW50cnk6ICdVbml0ZWQgU3RhdGVzJywgaW5zdGFsbHM6IDgsIHBlcmNlbnRhZ2U6IDIzLjUgfSxcbiAgICAgICAgeyBjb3VudHJ5OiAnVW5pdGVkIEtpbmdkb20nLCBpbnN0YWxsczogNCwgcGVyY2VudGFnZTogMTEuOCB9LFxuICAgICAgICB7IGNvdW50cnk6ICdDYW5hZGEnLCBpbnN0YWxsczogMiwgcGVyY2VudGFnZTogNS45IH1cbiAgICAgIF0sXG4gICAgICB0b3BDYW1wYWlnbnM6IFtcbiAgICAgICAgeyBjYW1wYWlnbjogJ0ZhY2Vib29rIEFkcycsIGluc3RhbGxzOiAxNSwgY29zdDogMzc1LCBjcGk6IDI1LjAsIHJvYXM6IDIuMyB9LFxuICAgICAgICB7IGNhbXBhaWduOiAnR29vZ2xlIFVBQycsIGluc3RhbGxzOiA3LCBjb3N0OiAxNzUsIGNwaTogMjUuMCwgcm9hczogNC45IH0sXG4gICAgICAgIHsgY2FtcGFpZ246ICdPcmdhbmljJywgaW5zdGFsbHM6IDEyLCBjb3N0OiAwLCBjcGk6IDAsIHJvYXM6IDAgfVxuICAgICAgXSxcbiAgICAgIGRhaWx5RGF0YTogdGhpcy5nZW5lcmF0ZVJlYWxpc3RpY0RhaWx5RGF0YSgpLFxuICAgICAgY29ob3J0RGF0YTogW1xuICAgICAgICB7IGNvaG9ydDogJ1dlZWsgMScsIGRheTE6IDc1LCBkYXk3OiA0NSwgZGF5MzA6IDI0IH0sXG4gICAgICAgIHsgY29ob3J0OiAnV2VlayAyJywgZGF5MTogNzIsIGRheTc6IDQyLCBkYXkzMDogMjIgfSxcbiAgICAgICAgeyBjb2hvcnQ6ICdXZWVrIDMnLCBkYXkxOiA3OCwgZGF5NzogNDgsIGRheTMwOiAyNiB9LFxuICAgICAgICB7IGNvaG9ydDogJ1dlZWsgNCcsIGRheTE6IDc0LCBkYXk3OiA0NCwgZGF5MzA6IDIzIH1cbiAgICAgIF0sXG4gICAgICBtZWRpYVNvdXJjZURhdGE6IFtcbiAgICAgICAgeyBtZWRpYVNvdXJjZTogJ0ZhY2Vib29rIEFkcycsIGluc3RhbGxzOiAxNSwgY29zdDogMzc1LCBjcGk6IDI1LjAsIHJvYXM6IDIuMyB9LFxuICAgICAgICB7IG1lZGlhU291cmNlOiAnR29vZ2xlIFVBQycsIGluc3RhbGxzOiA3LCBjb3N0OiAxNzUsIGNwaTogMjUuMCwgcm9hczogNC45IH0sXG4gICAgICAgIHsgbWVkaWFTb3VyY2U6ICdPcmdhbmljJywgaW5zdGFsbHM6IDEyLCBjb3N0OiAwLCBjcGk6IDAsIHJvYXM6IDAgfVxuICAgICAgXVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlUmVhbGlzdGljRGFpbHlEYXRhKCkge1xuICAgIGNvbnN0IGRhdGEgPSBbXVxuICAgIGxldCB0b3RhbEluc3RhbGxzID0gMFxuICAgIFxuICAgIGZvciAobGV0IGkgPSAyOTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpXG4gICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBpKVxuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSByZWFsaXN0aWMgZGlzdHJpYnV0aW9uIC0gbW9yZSBpbnN0YWxscyBpbiByZWNlbnQgZGF5c1xuICAgICAgbGV0IGluc3RhbGxzID0gMFxuICAgICAgaWYgKHRvdGFsSW5zdGFsbHMgPCAzNCkge1xuICAgICAgICBpZiAoaSA8IDEwKSBpbnN0YWxscyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpICsgMSAvLyBSZWNlbnQgZGF5czogMS0zIGluc3RhbGxzXG4gICAgICAgIGVsc2UgaWYgKGkgPCAyMCkgaW5zdGFsbHMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSAvLyBNaWQgcGVyaW9kOiAwLTEgaW5zdGFsbHNcbiAgICAgICAgZWxzZSBpbnN0YWxscyA9IE1hdGgucmFuZG9tKCkgPCAwLjMgPyAxIDogMCAvLyBFYXJseSBkYXlzOiBvY2Nhc2lvbmFsIGluc3RhbGxcbiAgICAgICAgXG4gICAgICAgIGlmICh0b3RhbEluc3RhbGxzICsgaW5zdGFsbHMgPiAzNCkge1xuICAgICAgICAgIGluc3RhbGxzID0gMzQgLSB0b3RhbEluc3RhbGxzXG4gICAgICAgIH1cbiAgICAgICAgdG90YWxJbnN0YWxscyArPSBpbnN0YWxsc1xuICAgICAgfVxuICAgICAgXG4gICAgICBkYXRhLnB1c2goe1xuICAgICAgICBkYXRlOiBkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgICAgaW5zdGFsbHMsXG4gICAgICAgIHJldmVudWU6IGluc3RhbGxzICogMjUsIC8vICQyNSBwZXIgaW5zdGFsbFxuICAgICAgICBvcmdhbmljSW5zdGFsbHM6IE1hdGguZmxvb3IoaW5zdGFsbHMgKiAwLjM1KSxcbiAgICAgICAgbm9uT3JnYW5pY0luc3RhbGxzOiBNYXRoLmZsb29yKGluc3RhbGxzICogMC42NSlcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBnZXREYXRlRGF5c0FnbyhkYXlzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpXG4gICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gZGF5cylcbiAgICByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGdldEN1cnJlbnREYXRlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdXG4gIH1cblxuICAvLyBNZXRob2QgdG8gZ2V0IGNvbXByZWhlbnNpdmUgaW5zaWdodHMgZGF0YSBmb3IgQUkgYW5hbHlzaXNcbiAgc3RhdGljIGFzeW5jIGdldEluc2lnaHRzRGF0YShhcHBJZD86IHN0cmluZykge1xuICAgIGNvbnN0IG1ldHJpY3MgPSBhd2FpdCB0aGlzLmdldENvbXByZWhlbnNpdmVNZXRyaWNzKGFwcElkKVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbEluc3RhbGxzOiBtZXRyaWNzLnRvdGFsSW5zdGFsbHMsXG4gICAgICBvcmdhbmljUmF0ZTogKG1ldHJpY3Mub3JnYW5pY0luc3RhbGxzIC8gbWV0cmljcy50b3RhbEluc3RhbGxzKSAqIDEwMCxcbiAgICAgIGF2ZXJhZ2VDUEk6IG1ldHJpY3MuYXZlcmFnZUNQSSxcbiAgICAgIHJldGVudGlvbkRheTE6IG1ldHJpY3MucmV0ZW50aW9uRGF5MSxcbiAgICAgIHJldGVudGlvbkRheTc6IG1ldHJpY3MucmV0ZW50aW9uRGF5NyxcbiAgICAgIHJldGVudGlvbkRheTMwOiBtZXRyaWNzLnJldGVudGlvbkRheTMwLFxuICAgICAgdG9wUGVyZm9ybWluZ0NhbXBhaWduOiBtZXRyaWNzLnRvcENhbXBhaWduc1swXT8uY2FtcGFpZ24gfHwgJ04vQScsXG4gICAgICB0b3BDb3VudHJ5OiBtZXRyaWNzLnRvcENvdW50cmllc1swXT8uY291bnRyeSB8fCAnTi9BJyxcbiAgICAgIHJlY2VudFRyZW5kOiB0aGlzLmFuYWx5emVUcmVuZChtZXRyaWNzLmRhaWx5RGF0YSksXG4gICAgICB0b3RhbFJldmVudWU6IG1ldHJpY3MudG90YWxSZXZlbnVlLFxuICAgICAgcm9hczogdGhpcy5jYWxjdWxhdGVPdmVyYWxsUk9BUyhtZXRyaWNzLnRvcENhbXBhaWducyksXG4gICAgICBjb2hvcnRQZXJmb3JtYW5jZTogdGhpcy5hbmFseXplQ29ob3J0UGVyZm9ybWFuY2UobWV0cmljcy5jb2hvcnREYXRhKSxcbiAgICAgIG1lZGlhU291cmNlUGVyZm9ybWFuY2U6IHRoaXMuYW5hbHl6ZU1lZGlhU291cmNlUGVyZm9ybWFuY2UobWV0cmljcy5tZWRpYVNvdXJjZURhdGEpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgYW5hbHl6ZVRyZW5kKGRhaWx5RGF0YTogYW55W10pIHtcbiAgICBpZiAoZGFpbHlEYXRhLmxlbmd0aCA8IDcpIHJldHVybiAnaW5zdWZmaWNpZW50X2RhdGEnXG4gICAgXG4gICAgY29uc3QgcmVjZW50N0RheXMgPSBkYWlseURhdGEuc2xpY2UoLTcpLnJlZHVjZSgoc3VtLCBkYXkpID0+IHN1bSArIGRheS5pbnN0YWxscywgMClcbiAgICBjb25zdCBwcmV2aW91czdEYXlzID0gZGFpbHlEYXRhLnNsaWNlKC0xNCwgLTcpLnJlZHVjZSgoc3VtLCBkYXkpID0+IHN1bSArIGRheS5pbnN0YWxscywgMClcbiAgICBcbiAgICBpZiAocHJldmlvdXM3RGF5cyA9PT0gMCkgcmV0dXJuIHJlY2VudDdEYXlzID4gMCA/ICdncm93aW5nJyA6ICdzdGFnbmFudCdcbiAgICBcbiAgICBjb25zdCBjaGFuZ2UgPSAoKHJlY2VudDdEYXlzIC0gcHJldmlvdXM3RGF5cykgLyBwcmV2aW91czdEYXlzKSAqIDEwMFxuICAgIFxuICAgIGlmIChjaGFuZ2UgPiAyMCkgcmV0dXJuICdyYXBpZGx5X2dyb3dpbmcnXG4gICAgaWYgKGNoYW5nZSA+IDEwKSByZXR1cm4gJ2dyb3dpbmcnXG4gICAgaWYgKGNoYW5nZSA8IC0yMCkgcmV0dXJuICdyYXBpZGx5X2RlY2xpbmluZydcbiAgICBpZiAoY2hhbmdlIDwgLTEwKSByZXR1cm4gJ2RlY2xpbmluZydcbiAgICByZXR1cm4gJ3N0YWJsZSdcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGNhbGN1bGF0ZU92ZXJhbGxST0FTKGNhbXBhaWduczogYW55W10pIHtcbiAgICBjb25zdCB0b3RhbENvc3QgPSBjYW1wYWlnbnMucmVkdWNlKChzdW0sIGNhbXBhaWduKSA9PiBzdW0gKyBjYW1wYWlnbi5jb3N0LCAwKVxuICAgIGNvbnN0IHRvdGFsUmV2ZW51ZSA9IGNhbXBhaWducy5yZWR1Y2UoKHN1bSwgY2FtcGFpZ24pID0+IHN1bSArIChjYW1wYWlnbi5pbnN0YWxscyAqIDI1KSwgMCkgLy8gJDI1IHBlciBpbnN0YWxsXG4gICAgcmV0dXJuIHRvdGFsQ29zdCA+IDAgPyB0b3RhbFJldmVudWUgLyB0b3RhbENvc3QgOiAwXG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBhbmFseXplQ29ob3J0UGVyZm9ybWFuY2UoY29ob3J0czogYW55W10pIHtcbiAgICBpZiAoY29ob3J0cy5sZW5ndGggPT09IDApIHJldHVybiAnbm9fZGF0YSdcbiAgICBcbiAgICBjb25zdCBhdmdEYXkzMCA9IGNvaG9ydHMucmVkdWNlKChzdW0sIGNvaG9ydCkgPT4gc3VtICsgY29ob3J0LmRheTMwLCAwKSAvIGNvaG9ydHMubGVuZ3RoXG4gICAgXG4gICAgaWYgKGF2Z0RheTMwID4gMzApIHJldHVybiAnZXhjZWxsZW50J1xuICAgIGlmIChhdmdEYXkzMCA+IDIwKSByZXR1cm4gJ2dvb2QnXG4gICAgaWYgKGF2Z0RheTMwID4gMTUpIHJldHVybiAnYXZlcmFnZSdcbiAgICByZXR1cm4gJ25lZWRzX2ltcHJvdmVtZW50J1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgYW5hbHl6ZU1lZGlhU291cmNlUGVyZm9ybWFuY2UobWVkaWFTb3VyY2VzOiBhbnlbXSkge1xuICAgIGNvbnN0IHBhaWRTb3VyY2VzID0gbWVkaWFTb3VyY2VzLmZpbHRlcihzb3VyY2UgPT4gc291cmNlLmNvc3QgPiAwKVxuICAgIGlmIChwYWlkU291cmNlcy5sZW5ndGggPT09IDApIHJldHVybiAnb3JnYW5pY19vbmx5J1xuICAgIFxuICAgIGNvbnN0IGF2Z0NQSSA9IHBhaWRTb3VyY2VzLnJlZHVjZSgoc3VtLCBzb3VyY2UpID0+IHN1bSArIHNvdXJjZS5jcGksIDApIC8gcGFpZFNvdXJjZXMubGVuZ3RoXG4gICAgY29uc3QgYXZnUk9BUyA9IHBhaWRTb3VyY2VzLnJlZHVjZSgoc3VtLCBzb3VyY2UpID0+IHN1bSArIHNvdXJjZS5yb2FzLCAwKSAvIHBhaWRTb3VyY2VzLmxlbmd0aFxuICAgIFxuICAgIGlmIChhdmdST0FTID4gMyAmJiBhdmdDUEkgPCAzMCkgcmV0dXJuICdleGNlbGxlbnQnXG4gICAgaWYgKGF2Z1JPQVMgPiAyICYmIGF2Z0NQSSA8IDQwKSByZXR1cm4gJ2dvb2QnXG4gICAgaWYgKGF2Z1JPQVMgPiAxLjUpIHJldHVybiAnYXZlcmFnZSdcbiAgICByZXR1cm4gJ25lZWRzX29wdGltaXphdGlvbidcbiAgfVxufSJdLCJuYW1lcyI6WyJheGlvcyIsIkFwcHNGbHllclNlcnZpY2UiLCJCQVNFX1VSTCIsIkFQSV9UT0tFTiIsInByb2Nlc3MiLCJlbnYiLCJBUFBTRkxZRVJfQVBJX1RPS0VOIiwiZ2V0Q29tcHJlaGVuc2l2ZU1ldHJpY3MiLCJhcHBJZCIsImdldEVuaGFuY2VkTW9ja0RhdGEiLCJpbnN0YWxsc0RhdGEiLCJmZXRjaEluc3RhbGxzRGF0YSIsInJldmVudWVEYXRhIiwiZmV0Y2hSZXZlbnVlRGF0YSIsInJldGVudGlvbkRhdGEiLCJmZXRjaFJldGVudGlvbkRhdGEiLCJjb2hvcnREYXRhIiwiZmV0Y2hDb2hvcnREYXRhIiwicHJvY2Vzc0NvbXByZWhlbnNpdmVEYXRhIiwiZXJyb3IiLCJjb25zb2xlIiwicGFyYW1zIiwiZnJvbSIsImdldERhdGVEYXlzQWdvIiwidG8iLCJnZXRDdXJyZW50RGF0ZSIsImFwcF9pZCIsImdyb3VwaW5nIiwicmVzcG9uc2UiLCJnZXQiLCJoZWFkZXJzIiwiZGF0YSIsImluc3RhbGxzIiwicmV2ZW51ZSIsInJldGVudGlvbiIsImNvaG9ydCIsInRvdGFsSW5zdGFsbHMiLCJBcnJheSIsImlzQXJyYXkiLCJyZWR1Y2UiLCJzdW0iLCJpdGVtIiwicGFyc2VJbnQiLCJvcmdhbmljSW5zdGFsbHMiLCJmaWx0ZXIiLCJtZWRpYV9zb3VyY2UiLCJ0b3RhbFJldmVudWUiLCJwYXJzZUZsb2F0IiwiY291bnRyeURhdGEiLCJhY2MiLCJjb3VudHJ5IiwiZ2VvIiwidG9wQ291bnRyaWVzIiwiT2JqZWN0IiwiZW50cmllcyIsIm1hcCIsInBlcmNlbnRhZ2UiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsImNhbXBhaWduRGF0YSIsImNhbXBhaWduIiwiY29zdCIsInRvcENhbXBhaWducyIsImNwaSIsInJvYXMiLCJkYWlseURhdGEiLCJwcm9jZXNzRGFpbHlEYXRhIiwiY29ob3J0UHJvY2Vzc2VkIiwicHJvY2Vzc0NvaG9ydERhdGEiLCJtZWRpYVNvdXJjZURhdGEiLCJwcm9jZXNzTWVkaWFTb3VyY2VEYXRhIiwibm9uT3JnYW5pY0luc3RhbGxzIiwiYXZlcmFnZUNQSSIsInJldGVudGlvbkRheTEiLCJleHRyYWN0UmV0ZW50aW9uIiwicmV0ZW50aW9uRGF5NyIsInJldGVudGlvbkRheTMwIiwiZGFpbHlNYXAiLCJNYXAiLCJmb3JFYWNoIiwiZGF0ZSIsImluc3RhbGxfZGF0ZSIsImhhcyIsInNldCIsImV2ZW50X2RhdGUiLCJyZXN1bHQiLCJpIiwiRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwiZGF0ZVN0ciIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJwdXNoIiwiZGF5MSIsImRheTciLCJkYXkzMCIsImNvaG9ydE1hcCIsImNvaG9ydEtleSIsImNvaG9ydF9kYXkiLCJyZXRlbnRpb25fcmF0ZSIsIm1lZGlhU291cmNlIiwibWVkaWFTb3VyY2VNYXAiLCJzb3VyY2UiLCJkYXkiLCJyZXRlbnRpb25JdGVtIiwiZmluZCIsImdlbmVyYXRlUmVhbGlzdGljRGFpbHlEYXRhIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZGF5cyIsImdldEluc2lnaHRzRGF0YSIsIm1ldHJpY3MiLCJvcmdhbmljUmF0ZSIsInRvcFBlcmZvcm1pbmdDYW1wYWlnbiIsInRvcENvdW50cnkiLCJyZWNlbnRUcmVuZCIsImFuYWx5emVUcmVuZCIsImNhbGN1bGF0ZU92ZXJhbGxST0FTIiwiY29ob3J0UGVyZm9ybWFuY2UiLCJhbmFseXplQ29ob3J0UGVyZm9ybWFuY2UiLCJtZWRpYVNvdXJjZVBlcmZvcm1hbmNlIiwiYW5hbHl6ZU1lZGlhU291cmNlUGVyZm9ybWFuY2UiLCJsZW5ndGgiLCJyZWNlbnQ3RGF5cyIsInByZXZpb3VzN0RheXMiLCJjaGFuZ2UiLCJjYW1wYWlnbnMiLCJ0b3RhbENvc3QiLCJjb2hvcnRzIiwiYXZnRGF5MzAiLCJtZWRpYVNvdXJjZXMiLCJwYWlkU291cmNlcyIsImF2Z0NQSSIsImF2Z1JPQVMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrations/appsflyer.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrations/openai.ts":
/*!****************************************!*\
  !*** ./src/lib/integrations/openai.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIInsightsService: () => (/* binding */ AIInsightsService)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nclass AIInsightsService {\n    static async generateComprehensiveInsights(appData) {\n        try {\n            const prompt = `\n        You are an expert mobile app marketing consultant. Analyze the following comprehensive app performance data and provide 4-6 specific, actionable insights and recommendations for the app owner.\n        \n        APP PERFORMANCE DATA:\n        - Total Installs: ${appData.totalInstalls}\n        - Organic Rate: ${appData.organicRate?.toFixed(1)}%\n        - Average CPI: $${appData.averageCPI?.toFixed(2)}\n        - Day 1 Retention: ${appData.retentionDay1?.toFixed(1)}%\n        - Day 7 Retention: ${appData.retentionDay7?.toFixed(1)}%\n        - Day 30 Retention: ${appData.retentionDay30?.toFixed(1)}%\n        - Total Revenue: $${appData.totalRevenue}\n        - Overall ROAS: ${appData.roas?.toFixed(2)}\n        - Top Performing Campaign: ${appData.topPerformingCampaign}\n        - Top Country: ${appData.topCountry}\n        - Recent Trend: ${appData.recentTrend}\n        - Cohort Performance: ${appData.cohortPerformance}\n        - Media Source Performance: ${appData.mediaSourcePerformance}\n        \n        CONTEXT:\n        - This is a mobile app with ${appData.totalInstalls} total installs\n        - The app generates revenue (likely freemium or paid)\n        - Owner wants specific actionable advice to improve performance\n        \n        Provide insights in JSON format with this exact structure:\n        {\n          \"insights\": [\n            {\n              \"type\": \"recommendation|alert|trend|opportunity\",\n              \"title\": \"Brief, specific title (max 50 chars)\",\n              \"description\": \"Detailed, actionable advice with specific steps and expected outcomes (100-200 words)\",\n              \"impact\": \"high|medium|low\",\n              \"actionRequired\": true|false,\n              \"priority\": \"urgent|high|medium|low\",\n              \"expectedOutcome\": \"Specific measurable outcome\",\n              \"timeframe\": \"immediate|1-2 weeks|1 month|3 months\"\n            }\n          ]\n        }\n        \n        Focus on:\n        1. User acquisition optimization\n        2. Retention improvement strategies\n        3. Revenue optimization\n        4. Campaign performance improvements\n        5. Geographic expansion opportunities\n        6. Cost optimization\n        \n        Make recommendations specific to the data provided. If retention is low, suggest specific tactics. If CPI is high, suggest optimization strategies. If organic rate is low, suggest ASO improvements.\n      `;\n            const response = await openai.chat.completions.create({\n                model: \"gpt-3.5-turbo\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: prompt\n                    }\n                ],\n                temperature: 0.7,\n                max_tokens: 2000\n            });\n            const content = response.choices[0]?.message?.content;\n            if (!content) throw new Error(\"No response from OpenAI\");\n            const parsed = JSON.parse(content);\n            return parsed.insights.map((insight, index)=>({\n                    id: `ai-insight-${Date.now()}-${index}`,\n                    ...insight,\n                    timestamp: new Date().toISOString()\n                }));\n        } catch (error) {\n            console.error(\"Error generating AI insights:\", error);\n            return this.getFallbackInsights(appData);\n        }\n    }\n    static async generateContentSuggestions(performanceData) {\n        try {\n            const prompt = `\n        Based on the following app performance data, suggest 5 specific Instagram content ideas that could drive app downloads:\n        \n        - App has ${performanceData.totalInstalls} installs\n        - Top country: ${performanceData.topCountry}\n        - Recent trend: ${performanceData.recentTrend}\n        - Top campaign: ${performanceData.topPerformingCampaign}\n        - Retention rate: ${performanceData.retentionDay30}%\n        \n        Provide suggestions as a JSON array of strings, each being a specific, actionable content idea that addresses the app's current performance metrics.\n      `;\n            const response = await openai.chat.completions.create({\n                model: \"gpt-3.5-turbo\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: prompt\n                    }\n                ],\n                temperature: 0.8,\n                max_tokens: 800\n            });\n            const content = response.choices[0]?.message?.content;\n            if (!content) throw new Error(\"No response from OpenAI\");\n            return JSON.parse(content);\n        } catch (error) {\n            console.error(\"Error generating content suggestions:\", error);\n            return [\n                \"Share user success stories and testimonials\",\n                \"Create behind-the-scenes app development content\",\n                \"Post feature highlights with real user scenarios\",\n                \"Share industry tips and educational content\",\n                \"Create engaging polls about user preferences\"\n            ];\n        }\n    }\n    static async generateMarketingStrategy(appData) {\n        try {\n            const prompt = `\n        Create a comprehensive marketing strategy for a mobile app with the following performance:\n        \n        - Total Installs: ${appData.totalInstalls}\n        - Organic Rate: ${appData.organicRate?.toFixed(1)}%\n        - CPI: $${appData.averageCPI?.toFixed(2)}\n        - Retention (Day 30): ${appData.retentionDay30?.toFixed(1)}%\n        - ROAS: ${appData.roas?.toFixed(2)}\n        - Top Country: ${appData.topCountry}\n        - Trend: ${appData.recentTrend}\n        \n        Provide a detailed 3-month marketing strategy with specific tactics, budget recommendations, and expected outcomes. Format as a comprehensive plan with sections for:\n        1. Immediate Actions (Week 1-2)\n        2. Short-term Strategy (Month 1)\n        3. Medium-term Strategy (Month 2-3)\n        4. Budget Allocation\n        5. Success Metrics\n      `;\n            const response = await openai.chat.completions.create({\n                model: \"gpt-3.5-turbo\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: prompt\n                    }\n                ],\n                temperature: 0.6,\n                max_tokens: 1500\n            });\n            return response.choices[0]?.message?.content || \"Strategy generation failed\";\n        } catch (error) {\n            console.error(\"Error generating marketing strategy:\", error);\n            return \"Unable to generate marketing strategy at this time.\";\n        }\n    }\n    static getFallbackInsights(appData) {\n        const insights = [];\n        // Analyze retention\n        if (appData.retentionDay30 < 25) {\n            insights.push({\n                id: \"retention-improvement\",\n                type: \"recommendation\",\n                title: \"Improve User Retention\",\n                description: `Your 30-day retention rate of ${appData.retentionDay30?.toFixed(1)}% is below industry average. Implement onboarding improvements, push notification campaigns, and in-app engagement features to boost retention by 10-15%.`,\n                impact: \"high\",\n                actionRequired: true,\n                priority: \"high\",\n                expectedOutcome: \"Increase 30-day retention to 30%+\",\n                timeframe: \"1 month\",\n                timestamp: new Date().toISOString()\n            });\n        }\n        // Analyze CPI\n        if (appData.averageCPI > 30) {\n            insights.push({\n                id: \"cpi-optimization\",\n                type: \"alert\",\n                title: \"High Cost Per Install\",\n                description: `Your average CPI of $${appData.averageCPI?.toFixed(2)} is above optimal range. Focus on improving ad creative, targeting, and bidding strategies. Consider increasing organic acquisition through ASO improvements.`,\n                impact: \"high\",\n                actionRequired: true,\n                priority: \"urgent\",\n                expectedOutcome: \"Reduce CPI by 20-30%\",\n                timeframe: \"2 weeks\",\n                timestamp: new Date().toISOString()\n            });\n        }\n        // Analyze organic rate\n        if (appData.organicRate < 40) {\n            insights.push({\n                id: \"organic-growth\",\n                type: \"opportunity\",\n                title: \"Boost Organic Acquisition\",\n                description: `Only ${appData.organicRate?.toFixed(1)}% of installs are organic. Invest in App Store Optimization (ASO), encourage user reviews, and implement referral programs to increase organic discovery and reduce dependency on paid channels.`,\n                impact: \"medium\",\n                actionRequired: true,\n                priority: \"medium\",\n                expectedOutcome: \"Increase organic rate to 50%+\",\n                timeframe: \"3 months\",\n                timestamp: new Date().toISOString()\n            });\n        }\n        // Analyze trend\n        if (appData.recentTrend === \"declining\" || appData.recentTrend === \"rapidly_declining\") {\n            insights.push({\n                id: \"trend-reversal\",\n                type: \"alert\",\n                title: \"Declining Install Trend\",\n                description: \"Your recent install trend is declining. Immediately review and refresh ad creatives, expand to new audiences, and consider seasonal promotions or feature launches to re-engage your target market.\",\n                impact: \"high\",\n                actionRequired: true,\n                priority: \"urgent\",\n                expectedOutcome: \"Reverse declining trend within 2 weeks\",\n                timeframe: \"immediate\",\n                timestamp: new Date().toISOString()\n            });\n        }\n        return insights.length > 0 ? insights : [\n            {\n                id: \"general-optimization\",\n                type: \"recommendation\",\n                title: \"Continue Optimization\",\n                description: \"Your app performance shows good potential. Focus on scaling successful campaigns, improving user onboarding, and expanding to new geographic markets to accelerate growth.\",\n                impact: \"medium\",\n                actionRequired: false,\n                priority: \"medium\",\n                expectedOutcome: \"Sustained growth trajectory\",\n                timeframe: \"1 month\",\n                timestamp: new Date().toISOString()\n            }\n        ];\n    }\n    // Legacy method for backward compatibility\n    static async generateInsights(metricsData) {\n        return this.generateComprehensiveInsights(metricsData);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNQQyxhQUFhO2dCQUNiQyxRQUFRO2dCQUNSQyxnQkFBZ0I7Z0JBQ2hCQyxVQUFVO2dCQUNWQyxpQkFBaUI7Z0JBQ2pCQyxXQUFXO2dCQUNYaEIsV0FBVyxJQUFJRixPQUFPRyxXQUFXO1lBQ25DO1FBQ0Y7UUFFQSxPQUFPUixTQUFTd0IsTUFBTSxHQUFHLElBQUl4QixXQUFXO1lBQUM7Z0JBQ3ZDSSxJQUFJO2dCQUNKWSxNQUFNO2dCQUNOQyxPQUFPO2dCQUNQQyxhQUFhO2dCQUNiQyxRQUFRO2dCQUNSQyxnQkFBZ0I7Z0JBQ2hCQyxVQUFVO2dCQUNWQyxpQkFBaUI7Z0JBQ2pCQyxXQUFXO2dCQUNYaEIsV0FBVyxJQUFJRixPQUFPRyxXQUFXO1lBQ25DO1NBQUU7SUFDSjtJQUVBLDJDQUEyQztJQUMzQyxhQUFhaUIsaUJBQWlCQyxXQUFnQixFQUF3QjtRQUNwRSxPQUFPLElBQUksQ0FBQzNELDZCQUE2QixDQUFDMkQ7SUFDNUM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1hcmtldGluZy1kYXNoYm9hcmQvLi9zcmMvbGliL2ludGVncmF0aW9ucy9vcGVuYWkudHM/NjUxOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSdcbmltcG9ydCB7IEFJSW5zaWdodCB9IGZyb20gJ0AvdHlwZXMvZGFzaGJvYXJkJ1xuXG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSxcbn0pXG5cbmV4cG9ydCBjbGFzcyBBSUluc2lnaHRzU2VydmljZSB7XG4gIHN0YXRpYyBhc3luYyBnZW5lcmF0ZUNvbXByZWhlbnNpdmVJbnNpZ2h0cyhhcHBEYXRhOiBhbnkpOiBQcm9taXNlPEFJSW5zaWdodFtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb21wdCA9IGBcbiAgICAgICAgWW91IGFyZSBhbiBleHBlcnQgbW9iaWxlIGFwcCBtYXJrZXRpbmcgY29uc3VsdGFudC4gQW5hbHl6ZSB0aGUgZm9sbG93aW5nIGNvbXByZWhlbnNpdmUgYXBwIHBlcmZvcm1hbmNlIGRhdGEgYW5kIHByb3ZpZGUgNC02IHNwZWNpZmljLCBhY3Rpb25hYmxlIGluc2lnaHRzIGFuZCByZWNvbW1lbmRhdGlvbnMgZm9yIHRoZSBhcHAgb3duZXIuXG4gICAgICAgIFxuICAgICAgICBBUFAgUEVSRk9STUFOQ0UgREFUQTpcbiAgICAgICAgLSBUb3RhbCBJbnN0YWxsczogJHthcHBEYXRhLnRvdGFsSW5zdGFsbHN9XG4gICAgICAgIC0gT3JnYW5pYyBSYXRlOiAke2FwcERhdGEub3JnYW5pY1JhdGU/LnRvRml4ZWQoMSl9JVxuICAgICAgICAtIEF2ZXJhZ2UgQ1BJOiAkJHthcHBEYXRhLmF2ZXJhZ2VDUEk/LnRvRml4ZWQoMil9XG4gICAgICAgIC0gRGF5IDEgUmV0ZW50aW9uOiAke2FwcERhdGEucmV0ZW50aW9uRGF5MT8udG9GaXhlZCgxKX0lXG4gICAgICAgIC0gRGF5IDcgUmV0ZW50aW9uOiAke2FwcERhdGEucmV0ZW50aW9uRGF5Nz8udG9GaXhlZCgxKX0lXG4gICAgICAgIC0gRGF5IDMwIFJldGVudGlvbjogJHthcHBEYXRhLnJldGVudGlvbkRheTMwPy50b0ZpeGVkKDEpfSVcbiAgICAgICAgLSBUb3RhbCBSZXZlbnVlOiAkJHthcHBEYXRhLnRvdGFsUmV2ZW51ZX1cbiAgICAgICAgLSBPdmVyYWxsIFJPQVM6ICR7YXBwRGF0YS5yb2FzPy50b0ZpeGVkKDIpfVxuICAgICAgICAtIFRvcCBQZXJmb3JtaW5nIENhbXBhaWduOiAke2FwcERhdGEudG9wUGVyZm9ybWluZ0NhbXBhaWdufVxuICAgICAgICAtIFRvcCBDb3VudHJ5OiAke2FwcERhdGEudG9wQ291bnRyeX1cbiAgICAgICAgLSBSZWNlbnQgVHJlbmQ6ICR7YXBwRGF0YS5yZWNlbnRUcmVuZH1cbiAgICAgICAgLSBDb2hvcnQgUGVyZm9ybWFuY2U6ICR7YXBwRGF0YS5jb2hvcnRQZXJmb3JtYW5jZX1cbiAgICAgICAgLSBNZWRpYSBTb3VyY2UgUGVyZm9ybWFuY2U6ICR7YXBwRGF0YS5tZWRpYVNvdXJjZVBlcmZvcm1hbmNlfVxuICAgICAgICBcbiAgICAgICAgQ09OVEVYVDpcbiAgICAgICAgLSBUaGlzIGlzIGEgbW9iaWxlIGFwcCB3aXRoICR7YXBwRGF0YS50b3RhbEluc3RhbGxzfSB0b3RhbCBpbnN0YWxsc1xuICAgICAgICAtIFRoZSBhcHAgZ2VuZXJhdGVzIHJldmVudWUgKGxpa2VseSBmcmVlbWl1bSBvciBwYWlkKVxuICAgICAgICAtIE93bmVyIHdhbnRzIHNwZWNpZmljIGFjdGlvbmFibGUgYWR2aWNlIHRvIGltcHJvdmUgcGVyZm9ybWFuY2VcbiAgICAgICAgXG4gICAgICAgIFByb3ZpZGUgaW5zaWdodHMgaW4gSlNPTiBmb3JtYXQgd2l0aCB0aGlzIGV4YWN0IHN0cnVjdHVyZTpcbiAgICAgICAge1xuICAgICAgICAgIFwiaW5zaWdodHNcIjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcInR5cGVcIjogXCJyZWNvbW1lbmRhdGlvbnxhbGVydHx0cmVuZHxvcHBvcnR1bml0eVwiLFxuICAgICAgICAgICAgICBcInRpdGxlXCI6IFwiQnJpZWYsIHNwZWNpZmljIHRpdGxlIChtYXggNTAgY2hhcnMpXCIsXG4gICAgICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJEZXRhaWxlZCwgYWN0aW9uYWJsZSBhZHZpY2Ugd2l0aCBzcGVjaWZpYyBzdGVwcyBhbmQgZXhwZWN0ZWQgb3V0Y29tZXMgKDEwMC0yMDAgd29yZHMpXCIsXG4gICAgICAgICAgICAgIFwiaW1wYWN0XCI6IFwiaGlnaHxtZWRpdW18bG93XCIsXG4gICAgICAgICAgICAgIFwiYWN0aW9uUmVxdWlyZWRcIjogdHJ1ZXxmYWxzZSxcbiAgICAgICAgICAgICAgXCJwcmlvcml0eVwiOiBcInVyZ2VudHxoaWdofG1lZGl1bXxsb3dcIixcbiAgICAgICAgICAgICAgXCJleHBlY3RlZE91dGNvbWVcIjogXCJTcGVjaWZpYyBtZWFzdXJhYmxlIG91dGNvbWVcIixcbiAgICAgICAgICAgICAgXCJ0aW1lZnJhbWVcIjogXCJpbW1lZGlhdGV8MS0yIHdlZWtzfDEgbW9udGh8MyBtb250aHNcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgRm9jdXMgb246XG4gICAgICAgIDEuIFVzZXIgYWNxdWlzaXRpb24gb3B0aW1pemF0aW9uXG4gICAgICAgIDIuIFJldGVudGlvbiBpbXByb3ZlbWVudCBzdHJhdGVnaWVzXG4gICAgICAgIDMuIFJldmVudWUgb3B0aW1pemF0aW9uXG4gICAgICAgIDQuIENhbXBhaWduIHBlcmZvcm1hbmNlIGltcHJvdmVtZW50c1xuICAgICAgICA1LiBHZW9ncmFwaGljIGV4cGFuc2lvbiBvcHBvcnR1bml0aWVzXG4gICAgICAgIDYuIENvc3Qgb3B0aW1pemF0aW9uXG4gICAgICAgIFxuICAgICAgICBNYWtlIHJlY29tbWVuZGF0aW9ucyBzcGVjaWZpYyB0byB0aGUgZGF0YSBwcm92aWRlZC4gSWYgcmV0ZW50aW9uIGlzIGxvdywgc3VnZ2VzdCBzcGVjaWZpYyB0YWN0aWNzLiBJZiBDUEkgaXMgaGlnaCwgc3VnZ2VzdCBvcHRpbWl6YXRpb24gc3RyYXRlZ2llcy4gSWYgb3JnYW5pYyByYXRlIGlzIGxvdywgc3VnZ2VzdCBBU08gaW1wcm92ZW1lbnRzLlxuICAgICAgYFxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICAgIG1vZGVsOiAnZ3B0LTMuNS10dXJibycsXG4gICAgICAgIG1lc3NhZ2VzOiBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHByb21wdCB9XSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAgICAgICAgbWF4X3Rva2VuczogMjAwMCxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGNvbnRlbnQgPSByZXNwb25zZS5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50XG4gICAgICBpZiAoIWNvbnRlbnQpIHRocm93IG5ldyBFcnJvcignTm8gcmVzcG9uc2UgZnJvbSBPcGVuQUknKVxuXG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGNvbnRlbnQpXG4gICAgICBcbiAgICAgIHJldHVybiBwYXJzZWQuaW5zaWdodHMubWFwKChpbnNpZ2h0OiBhbnksIGluZGV4OiBudW1iZXIpID0+ICh7XG4gICAgICAgIGlkOiBgYWktaW5zaWdodC0ke0RhdGUubm93KCl9LSR7aW5kZXh9YCxcbiAgICAgICAgLi4uaW5zaWdodCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9KSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBBSSBpbnNpZ2h0czonLCBlcnJvcilcbiAgICAgIHJldHVybiB0aGlzLmdldEZhbGxiYWNrSW5zaWdodHMoYXBwRGF0YSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2VuZXJhdGVDb250ZW50U3VnZ2VzdGlvbnMocGVyZm9ybWFuY2VEYXRhOiBhbnkpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb21wdCA9IGBcbiAgICAgICAgQmFzZWQgb24gdGhlIGZvbGxvd2luZyBhcHAgcGVyZm9ybWFuY2UgZGF0YSwgc3VnZ2VzdCA1IHNwZWNpZmljIEluc3RhZ3JhbSBjb250ZW50IGlkZWFzIHRoYXQgY291bGQgZHJpdmUgYXBwIGRvd25sb2FkczpcbiAgICAgICAgXG4gICAgICAgIC0gQXBwIGhhcyAke3BlcmZvcm1hbmNlRGF0YS50b3RhbEluc3RhbGxzfSBpbnN0YWxsc1xuICAgICAgICAtIFRvcCBjb3VudHJ5OiAke3BlcmZvcm1hbmNlRGF0YS50b3BDb3VudHJ5fVxuICAgICAgICAtIFJlY2VudCB0cmVuZDogJHtwZXJmb3JtYW5jZURhdGEucmVjZW50VHJlbmR9XG4gICAgICAgIC0gVG9wIGNhbXBhaWduOiAke3BlcmZvcm1hbmNlRGF0YS50b3BQZXJmb3JtaW5nQ2FtcGFpZ259XG4gICAgICAgIC0gUmV0ZW50aW9uIHJhdGU6ICR7cGVyZm9ybWFuY2VEYXRhLnJldGVudGlvbkRheTMwfSVcbiAgICAgICAgXG4gICAgICAgIFByb3ZpZGUgc3VnZ2VzdGlvbnMgYXMgYSBKU09OIGFycmF5IG9mIHN0cmluZ3MsIGVhY2ggYmVpbmcgYSBzcGVjaWZpYywgYWN0aW9uYWJsZSBjb250ZW50IGlkZWEgdGhhdCBhZGRyZXNzZXMgdGhlIGFwcCdzIGN1cnJlbnQgcGVyZm9ybWFuY2UgbWV0cmljcy5cbiAgICAgIGBcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICBtb2RlbDogJ2dwdC0zLjUtdHVyYm8nLFxuICAgICAgICBtZXNzYWdlczogW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiBwcm9tcHQgfV0sXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjgsXG4gICAgICAgIG1heF90b2tlbnM6IDgwMCxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGNvbnRlbnQgPSByZXNwb25zZS5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50XG4gICAgICBpZiAoIWNvbnRlbnQpIHRocm93IG5ldyBFcnJvcignTm8gcmVzcG9uc2UgZnJvbSBPcGVuQUknKVxuXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIGNvbnRlbnQgc3VnZ2VzdGlvbnM6JywgZXJyb3IpXG4gICAgICByZXR1cm4gW1xuICAgICAgICAnU2hhcmUgdXNlciBzdWNjZXNzIHN0b3JpZXMgYW5kIHRlc3RpbW9uaWFscycsXG4gICAgICAgICdDcmVhdGUgYmVoaW5kLXRoZS1zY2VuZXMgYXBwIGRldmVsb3BtZW50IGNvbnRlbnQnLFxuICAgICAgICAnUG9zdCBmZWF0dXJlIGhpZ2hsaWdodHMgd2l0aCByZWFsIHVzZXIgc2NlbmFyaW9zJyxcbiAgICAgICAgJ1NoYXJlIGluZHVzdHJ5IHRpcHMgYW5kIGVkdWNhdGlvbmFsIGNvbnRlbnQnLFxuICAgICAgICAnQ3JlYXRlIGVuZ2FnaW5nIHBvbGxzIGFib3V0IHVzZXIgcHJlZmVyZW5jZXMnXG4gICAgICBdXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdlbmVyYXRlTWFya2V0aW5nU3RyYXRlZ3koYXBwRGF0YTogYW55KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvbXB0ID0gYFxuICAgICAgICBDcmVhdGUgYSBjb21wcmVoZW5zaXZlIG1hcmtldGluZyBzdHJhdGVneSBmb3IgYSBtb2JpbGUgYXBwIHdpdGggdGhlIGZvbGxvd2luZyBwZXJmb3JtYW5jZTpcbiAgICAgICAgXG4gICAgICAgIC0gVG90YWwgSW5zdGFsbHM6ICR7YXBwRGF0YS50b3RhbEluc3RhbGxzfVxuICAgICAgICAtIE9yZ2FuaWMgUmF0ZTogJHthcHBEYXRhLm9yZ2FuaWNSYXRlPy50b0ZpeGVkKDEpfSVcbiAgICAgICAgLSBDUEk6ICQke2FwcERhdGEuYXZlcmFnZUNQST8udG9GaXhlZCgyKX1cbiAgICAgICAgLSBSZXRlbnRpb24gKERheSAzMCk6ICR7YXBwRGF0YS5yZXRlbnRpb25EYXkzMD8udG9GaXhlZCgxKX0lXG4gICAgICAgIC0gUk9BUzogJHthcHBEYXRhLnJvYXM/LnRvRml4ZWQoMil9XG4gICAgICAgIC0gVG9wIENvdW50cnk6ICR7YXBwRGF0YS50b3BDb3VudHJ5fVxuICAgICAgICAtIFRyZW5kOiAke2FwcERhdGEucmVjZW50VHJlbmR9XG4gICAgICAgIFxuICAgICAgICBQcm92aWRlIGEgZGV0YWlsZWQgMy1tb250aCBtYXJrZXRpbmcgc3RyYXRlZ3kgd2l0aCBzcGVjaWZpYyB0YWN0aWNzLCBidWRnZXQgcmVjb21tZW5kYXRpb25zLCBhbmQgZXhwZWN0ZWQgb3V0Y29tZXMuIEZvcm1hdCBhcyBhIGNvbXByZWhlbnNpdmUgcGxhbiB3aXRoIHNlY3Rpb25zIGZvcjpcbiAgICAgICAgMS4gSW1tZWRpYXRlIEFjdGlvbnMgKFdlZWsgMS0yKVxuICAgICAgICAyLiBTaG9ydC10ZXJtIFN0cmF0ZWd5IChNb250aCAxKVxuICAgICAgICAzLiBNZWRpdW0tdGVybSBTdHJhdGVneSAoTW9udGggMi0zKVxuICAgICAgICA0LiBCdWRnZXQgQWxsb2NhdGlvblxuICAgICAgICA1LiBTdWNjZXNzIE1ldHJpY3NcbiAgICAgIGBcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICBtb2RlbDogJ2dwdC0zLjUtdHVyYm8nLFxuICAgICAgICBtZXNzYWdlczogW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiBwcm9tcHQgfV0sXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjYsXG4gICAgICAgIG1heF90b2tlbnM6IDE1MDAsXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2UuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCAnU3RyYXRlZ3kgZ2VuZXJhdGlvbiBmYWlsZWQnXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgbWFya2V0aW5nIHN0cmF0ZWd5OicsIGVycm9yKVxuICAgICAgcmV0dXJuICdVbmFibGUgdG8gZ2VuZXJhdGUgbWFya2V0aW5nIHN0cmF0ZWd5IGF0IHRoaXMgdGltZS4nXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0RmFsbGJhY2tJbnNpZ2h0cyhhcHBEYXRhOiBhbnkpOiBBSUluc2lnaHRbXSB7XG4gICAgY29uc3QgaW5zaWdodHM6IEFJSW5zaWdodFtdID0gW11cbiAgICBcbiAgICAvLyBBbmFseXplIHJldGVudGlvblxuICAgIGlmIChhcHBEYXRhLnJldGVudGlvbkRheTMwIDwgMjUpIHtcbiAgICAgIGluc2lnaHRzLnB1c2goe1xuICAgICAgICBpZDogJ3JldGVudGlvbi1pbXByb3ZlbWVudCcsXG4gICAgICAgIHR5cGU6ICdyZWNvbW1lbmRhdGlvbicsXG4gICAgICAgIHRpdGxlOiAnSW1wcm92ZSBVc2VyIFJldGVudGlvbicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgWW91ciAzMC1kYXkgcmV0ZW50aW9uIHJhdGUgb2YgJHthcHBEYXRhLnJldGVudGlvbkRheTMwPy50b0ZpeGVkKDEpfSUgaXMgYmVsb3cgaW5kdXN0cnkgYXZlcmFnZS4gSW1wbGVtZW50IG9uYm9hcmRpbmcgaW1wcm92ZW1lbnRzLCBwdXNoIG5vdGlmaWNhdGlvbiBjYW1wYWlnbnMsIGFuZCBpbi1hcHAgZW5nYWdlbWVudCBmZWF0dXJlcyB0byBib29zdCByZXRlbnRpb24gYnkgMTAtMTUlLmAsXG4gICAgICAgIGltcGFjdDogJ2hpZ2gnLFxuICAgICAgICBhY3Rpb25SZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgcHJpb3JpdHk6ICdoaWdoJyxcbiAgICAgICAgZXhwZWN0ZWRPdXRjb21lOiAnSW5jcmVhc2UgMzAtZGF5IHJldGVudGlvbiB0byAzMCUrJyxcbiAgICAgICAgdGltZWZyYW1lOiAnMSBtb250aCcsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIEFuYWx5emUgQ1BJXG4gICAgaWYgKGFwcERhdGEuYXZlcmFnZUNQSSA+IDMwKSB7XG4gICAgICBpbnNpZ2h0cy5wdXNoKHtcbiAgICAgICAgaWQ6ICdjcGktb3B0aW1pemF0aW9uJyxcbiAgICAgICAgdHlwZTogJ2FsZXJ0JyxcbiAgICAgICAgdGl0bGU6ICdIaWdoIENvc3QgUGVyIEluc3RhbGwnLFxuICAgICAgICBkZXNjcmlwdGlvbjogYFlvdXIgYXZlcmFnZSBDUEkgb2YgJCR7YXBwRGF0YS5hdmVyYWdlQ1BJPy50b0ZpeGVkKDIpfSBpcyBhYm92ZSBvcHRpbWFsIHJhbmdlLiBGb2N1cyBvbiBpbXByb3ZpbmcgYWQgY3JlYXRpdmUsIHRhcmdldGluZywgYW5kIGJpZGRpbmcgc3RyYXRlZ2llcy4gQ29uc2lkZXIgaW5jcmVhc2luZyBvcmdhbmljIGFjcXVpc2l0aW9uIHRocm91Z2ggQVNPIGltcHJvdmVtZW50cy5gLFxuICAgICAgICBpbXBhY3Q6ICdoaWdoJyxcbiAgICAgICAgYWN0aW9uUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIHByaW9yaXR5OiAndXJnZW50JyxcbiAgICAgICAgZXhwZWN0ZWRPdXRjb21lOiAnUmVkdWNlIENQSSBieSAyMC0zMCUnLFxuICAgICAgICB0aW1lZnJhbWU6ICcyIHdlZWtzJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQW5hbHl6ZSBvcmdhbmljIHJhdGVcbiAgICBpZiAoYXBwRGF0YS5vcmdhbmljUmF0ZSA8IDQwKSB7XG4gICAgICBpbnNpZ2h0cy5wdXNoKHtcbiAgICAgICAgaWQ6ICdvcmdhbmljLWdyb3d0aCcsXG4gICAgICAgIHR5cGU6ICdvcHBvcnR1bml0eScsXG4gICAgICAgIHRpdGxlOiAnQm9vc3QgT3JnYW5pYyBBY3F1aXNpdGlvbicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgT25seSAke2FwcERhdGEub3JnYW5pY1JhdGU/LnRvRml4ZWQoMSl9JSBvZiBpbnN0YWxscyBhcmUgb3JnYW5pYy4gSW52ZXN0IGluIEFwcCBTdG9yZSBPcHRpbWl6YXRpb24gKEFTTyksIGVuY291cmFnZSB1c2VyIHJldmlld3MsIGFuZCBpbXBsZW1lbnQgcmVmZXJyYWwgcHJvZ3JhbXMgdG8gaW5jcmVhc2Ugb3JnYW5pYyBkaXNjb3ZlcnkgYW5kIHJlZHVjZSBkZXBlbmRlbmN5IG9uIHBhaWQgY2hhbm5lbHMuYCxcbiAgICAgICAgaW1wYWN0OiAnbWVkaXVtJyxcbiAgICAgICAgYWN0aW9uUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIHByaW9yaXR5OiAnbWVkaXVtJyxcbiAgICAgICAgZXhwZWN0ZWRPdXRjb21lOiAnSW5jcmVhc2Ugb3JnYW5pYyByYXRlIHRvIDUwJSsnLFxuICAgICAgICB0aW1lZnJhbWU6ICczIG1vbnRocycsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIEFuYWx5emUgdHJlbmRcbiAgICBpZiAoYXBwRGF0YS5yZWNlbnRUcmVuZCA9PT0gJ2RlY2xpbmluZycgfHwgYXBwRGF0YS5yZWNlbnRUcmVuZCA9PT0gJ3JhcGlkbHlfZGVjbGluaW5nJykge1xuICAgICAgaW5zaWdodHMucHVzaCh7XG4gICAgICAgIGlkOiAndHJlbmQtcmV2ZXJzYWwnLFxuICAgICAgICB0eXBlOiAnYWxlcnQnLFxuICAgICAgICB0aXRsZTogJ0RlY2xpbmluZyBJbnN0YWxsIFRyZW5kJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdZb3VyIHJlY2VudCBpbnN0YWxsIHRyZW5kIGlzIGRlY2xpbmluZy4gSW1tZWRpYXRlbHkgcmV2aWV3IGFuZCByZWZyZXNoIGFkIGNyZWF0aXZlcywgZXhwYW5kIHRvIG5ldyBhdWRpZW5jZXMsIGFuZCBjb25zaWRlciBzZWFzb25hbCBwcm9tb3Rpb25zIG9yIGZlYXR1cmUgbGF1bmNoZXMgdG8gcmUtZW5nYWdlIHlvdXIgdGFyZ2V0IG1hcmtldC4nLFxuICAgICAgICBpbXBhY3Q6ICdoaWdoJyxcbiAgICAgICAgYWN0aW9uUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIHByaW9yaXR5OiAndXJnZW50JyxcbiAgICAgICAgZXhwZWN0ZWRPdXRjb21lOiAnUmV2ZXJzZSBkZWNsaW5pbmcgdHJlbmQgd2l0aGluIDIgd2Vla3MnLFxuICAgICAgICB0aW1lZnJhbWU6ICdpbW1lZGlhdGUnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gaW5zaWdodHMubGVuZ3RoID4gMCA/IGluc2lnaHRzIDogW3tcbiAgICAgIGlkOiAnZ2VuZXJhbC1vcHRpbWl6YXRpb24nLFxuICAgICAgdHlwZTogJ3JlY29tbWVuZGF0aW9uJyxcbiAgICAgIHRpdGxlOiAnQ29udGludWUgT3B0aW1pemF0aW9uJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnWW91ciBhcHAgcGVyZm9ybWFuY2Ugc2hvd3MgZ29vZCBwb3RlbnRpYWwuIEZvY3VzIG9uIHNjYWxpbmcgc3VjY2Vzc2Z1bCBjYW1wYWlnbnMsIGltcHJvdmluZyB1c2VyIG9uYm9hcmRpbmcsIGFuZCBleHBhbmRpbmcgdG8gbmV3IGdlb2dyYXBoaWMgbWFya2V0cyB0byBhY2NlbGVyYXRlIGdyb3d0aC4nLFxuICAgICAgaW1wYWN0OiAnbWVkaXVtJyxcbiAgICAgIGFjdGlvblJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIHByaW9yaXR5OiAnbWVkaXVtJyxcbiAgICAgIGV4cGVjdGVkT3V0Y29tZTogJ1N1c3RhaW5lZCBncm93dGggdHJhamVjdG9yeScsXG4gICAgICB0aW1lZnJhbWU6ICcxIG1vbnRoJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfV1cbiAgfVxuXG4gIC8vIExlZ2FjeSBtZXRob2QgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgc3RhdGljIGFzeW5jIGdlbmVyYXRlSW5zaWdodHMobWV0cmljc0RhdGE6IGFueSk6IFByb21pc2U8QUlJbnNpZ2h0W10+IHtcbiAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUNvbXByZWhlbnNpdmVJbnNpZ2h0cyhtZXRyaWNzRGF0YSlcbiAgfVxufSJdLCJuYW1lcyI6WyJPcGVuQUkiLCJvcGVuYWkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJBSUluc2lnaHRzU2VydmljZSIsImdlbmVyYXRlQ29tcHJlaGVuc2l2ZUluc2lnaHRzIiwiYXBwRGF0YSIsInByb21wdCIsInRvdGFsSW5zdGFsbHMiLCJvcmdhbmljUmF0ZSIsInRvRml4ZWQiLCJhdmVyYWdlQ1BJIiwicmV0ZW50aW9uRGF5MSIsInJldGVudGlvbkRheTciLCJyZXRlbnRpb25EYXkzMCIsInRvdGFsUmV2ZW51ZSIsInJvYXMiLCJ0b3BQZXJmb3JtaW5nQ2FtcGFpZ24iLCJ0b3BDb3VudHJ5IiwicmVjZW50VHJlbmQiLCJjb2hvcnRQZXJmb3JtYW5jZSIsIm1lZGlhU291cmNlUGVyZm9ybWFuY2UiLCJyZXNwb25zZSIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRlbXBlcmF0dXJlIiwibWF4X3Rva2VucyIsImNob2ljZXMiLCJtZXNzYWdlIiwiRXJyb3IiLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJpbnNpZ2h0cyIsIm1hcCIsImluc2lnaHQiLCJpbmRleCIsImlkIiwiRGF0ZSIsIm5vdyIsInRpbWVzdGFtcCIsInRvSVNPU3RyaW5nIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0RmFsbGJhY2tJbnNpZ2h0cyIsImdlbmVyYXRlQ29udGVudFN1Z2dlc3Rpb25zIiwicGVyZm9ybWFuY2VEYXRhIiwiZ2VuZXJhdGVNYXJrZXRpbmdTdHJhdGVneSIsInB1c2giLCJ0eXBlIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImltcGFjdCIsImFjdGlvblJlcXVpcmVkIiwicHJpb3JpdHkiLCJleHBlY3RlZE91dGNvbWUiLCJ0aW1lZnJhbWUiLCJsZW5ndGgiLCJnZW5lcmF0ZUluc2lnaHRzIiwibWV0cmljc0RhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrations/openai.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/axios","vendor-chunks/mime-db","vendor-chunks/follow-redirects","vendor-chunks/debug","vendor-chunks/formdata-node","vendor-chunks/get-intrinsic","vendor-chunks/form-data","vendor-chunks/asynckit","vendor-chunks/combined-stream","vendor-chunks/mime-types","vendor-chunks/proxy-from-env","vendor-chunks/ms","vendor-chunks/supports-color","vendor-chunks/has-symbols","vendor-chunks/delayed-stream","vendor-chunks/function-bind","vendor-chunks/es-set-tostringtag","vendor-chunks/call-bind-apply-helpers","vendor-chunks/get-proto","vendor-chunks/dunder-proto","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/has-flag","vendor-chunks/es-define-property","vendor-chunks/gopd","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/openai","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-insights%2Froute&page=%2Fapi%2Fai-insights%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-insights%2Froute.ts&appDir=%2Fhome%2Fhsghumman%2FDocuments%2FDirt%20Drop%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fhsghumman%2FDocuments%2FDirt%20Drop&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();